/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.CostCenter");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.CostCenterCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.CostCenterChange");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");fcg.mdg.approvecrv2.DomainSpecParts.CostCenter={oBatchModel:"",sServiceURL:"",oS3Controller:null,loadLayout:function(s){s.getView().byId("page").removeContent(s.oCustomerDomain);s.getView().byId("page").removeContent(s.profitCenterIconTab);s.getView().byId("page").removeContent(s.oSupplierDomain);s.getView().byId("page").removeContent(s.costCenterIconTab);s.getView().byId("page").removeContent(s.glAccountIconTab);s.getView().byId("page").removeContent(s.oMaterialIconTab);try{sap.ui.getCore().byId("ccFileUpload-1-uploader").destroy();}catch(e){}try{sap.ui.getCore().byId("ccFileUpload-uploader").destroy();}catch(e){}this.oS3Controller=s;if(s.costCenterIconTab===""){s.costCenterIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.CostCenter',s);}else{s.costCenterIconTab.destroy();try{s.profitCenterIconTab.destroy();s.oMaterialIconTab.destroy();s.oCustomerDomain.destroy();s.oSupplierDomain.destroy();s.glAccountIconTab.destroy();}catch(e){}s.costCenterIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.CostCenter',s);}s.getView().byId("page").addContent(s.costCenterIconTab);this.oBatchModel=s.getView().getModel("MDG_FINANCIALS");this.sServiceURL=this.oBatchModel.sServiceUrl+"/";var a=s.ccHookCustomService(this.sServiceURL);if(a!==undefined){this.sServiceURL=a;}},getS3Instance:function(){return this.oS3Controller;},displayData:function(v,b,p,a,s){var l=this;var q="";var n="";var i=sap.ui.getCore().byId("costCenterNotes");var I=sap.ui.getCore().byId("costCenterAttachments");s.setNoteAttachIconTab(i,I);if(a==='CHANGE'){q=fcg.mdg.approvecrv2.DomainSpecParts.CostCenterChange.getQueries(this.sServiceURL,p,s);}else if(a==='CREATE'){q=fcg.mdg.approvecrv2.DomainSpecParts.CostCenterCreate.getQueries(this.sServiceURL,p,s);}q="/"+q;fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,q,b);var c=p.split("(");var C=c[1].split(")");var u="Decisions?Crequest="+C[0];var d="/"+u;if(!s.oApplicationFacade.isMock()){fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,d,b);}fcg.mdg.approvecrv2.util.DataAccess.performSubmitBatch(this.oBatchModel,s);var r=fcg.mdg.approvecrv2.util.DataAccess.getBatchData();if(!s.oApplicationFacade.isMock()){if(r[1].headers!==undefined&&r[1].headers.usmd1a016!==undefined){s.setCrLockError(r[1].headers.usmd1a016);s.createDecisionButtons(r[1].data.results,s,"",true);}else{if(r[1].data!==undefined)s.createDecisionButtons(r[1].data.results,s);else s.createDecisionButtons([],s);}if(r[1].headers!==undefined&&r[1].headers.mdg_gw_approve_cr009!==undefined){s.setCrRejected(r[1].headers.mdg_gw_approve_cr009);}}if(r[0]!==undefined&&r[0].data!==undefined){if(a==='CREATE'){fcg.mdg.approvecrv2.DomainSpecParts.CostCenterCreate.initialize_Forms(s);fcg.mdg.approvecrv2.DomainSpecParts.CostCenterCreate.displayFormData(r[0].data,l);}else if(a==='CHANGE'){fcg.mdg.approvecrv2.DomainSpecParts.CostCenterChange.initialize_Tables(s);fcg.mdg.approvecrv2.DomainSpecParts.CostCenterChange.displayTableData(r[0].data,l,s);}}else{sap.ui.getCore().byId("costCenterGenTab").setVisible(false);}}};
