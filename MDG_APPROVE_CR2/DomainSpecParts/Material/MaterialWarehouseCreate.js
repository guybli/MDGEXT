/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialWarehouseCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialCreate");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialWarehouseCreate={oMaterialWarehouseTable:"",oMaterialWarehouseForm:"",vNoDataTxt:"",aWarehouseDetailData:"",awhStorageTypeData:"",oS3Controller:"",i18n:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle(),initializeWarehouseTabl:function(r,s){this.oS3Controller=s;this.vNoDataTxt=this.i18n.getText("NodataCreate");if(r.results.length>1){if(this.oMaterialWarehouseTable===""){this.oMaterialWarehouseTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialWarehouseCreate',fcg.mdg.approvecrv2.util.Formatter);}else{this.oMaterialWarehouseTable.destroy();this.oMaterialWarehouseTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialWarehouseCreate',fcg.mdg.approvecrv2.util.Formatter);}sap.ui.getCore().byId("matCreateWarehouseDataLayout").removeAllContent();sap.ui.getCore().byId("matCreateWarehouseDataLayout").addContent(this.oMaterialWarehouseTable);}else{if(this.oMaterialWarehouseForm===""){this.oMaterialWarehouseForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialWarehouseDetails',fcg.mdg.approvecrv2.util.Formatter);}else{this.oMaterialWarehouseForm.destroy();this.oMaterialWarehouseForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialWarehouseDetails',fcg.mdg.approvecrv2.util.Formatter);}sap.ui.getCore().byId("matCreateWarehouseDataLayout").removeAllContent();sap.ui.getCore().byId("matCreateWarehouseDataLayout").addContent(this.oMaterialWarehouseForm);}if(sap.ui.getCore().byId("matChangeWarehouseDataLayout")!==undefined){sap.ui.getCore().byId("matChangeWarehouseDataLayout").destroy();}},displayWarehouseData:function(r,v){var d;var w={dataitems:[]};var W=new sap.ui.model.json.JSONModel();if(r.results.length>1){for(var i=0;i<r.results.length;i++){var o=r.results[i].LGNUM__TXT;var a=r.results[i].LGNUM;o=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(a,o);d={"warehousestatus":o};var e=this.oS3Controller.matHookgetWarehouseDataItems(d);if(e!==undefined){d=e;}w.dataitems.push(d);}var b=sap.ui.getCore().byId("MatWarehouseTable");var c=sap.ui.getCore().byId("WarehousepersIcon");var I="/dataitems";fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.setTablePersonalization(I,b,c);W.setData(w);var f=this.createWarehouseTableTemplate();f.attachPress({Entity:r,name:"matWarehouseDataDetail"},v.navtoSubDetail,v);b.setModel(W);b.bindItems('/dataitems',f,'','');}else if(r.results.length===1){var g=fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialWarehouseCreate.getWarehouseDetailData(0);var h=new sap.ui.model.json.JSONModel();if(g.L2SKR===""){g.L2SKR=g.L2SKR__TXT;g.L2SKR__TXT="";}h.setData(g);var j=this.setGetWarehouseHeader(r);sap.ui.getCore().byId("Txt_WAREHOUSEDETAILS").setText(j);sap.ui.getCore().byId("matWarehouseDataForm").setModel(h);var k=g.MLGNSTOR2MLGTSTORRel;var s=sap.ui.getCore().byId("MatWarehouseStorageTypeTable");var S=sap.ui.getCore().byId("StorageTypepersIcon");var l="/results";fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.setTablePersonalization(l,s,S);this.bindStorageTypeData(k);this.hideWarehouseSection();}else{var n=sap.ui.getCore().byId("matCreateWarehouseDataLayout");fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialCreate.setNoDataText(n,this.vNoDataTxt);}},createWarehouseTableTemplate:function(){var w=new sap.m.ColumnListItem({type:"Navigation",cells:[new sap.m.Text({text:{path:"warehousestatus",formatter:fcg.mdg.approvecrv2.util.Formatter.noValue}})]});var e=this.oS3Controller.matHookgetWarehouseTemplate(w);if(e!==undefined){w=e;}return w;},bindStorageTypeData:function(r){var w=sap.ui.getCore().byId("MatWarehouseStorageTypeTable");if(r.results.length>=1){var d=new sap.ui.model.json.JSONModel();d.setData(r);var i=this.getStorageTypeTableTemplate(d,"",this.oS3Controller,"");w.setModel(d);w.bindItems('/results',i,'','');}else{w.destroy();}},getStorageTypeTableTemplate:function(s,S,o,e){var a=new sap.ui.model.json.JSONModel();var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"LGTYP",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"LGTYP",e);a=S;}else{a=s;}var k=a.getProperty('LGTYP',this.getBindingContext());var d=a.getProperty('LGTYP__TXT',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(k,d);}}}),new sap.m.Text({text:{path:"LGPMLGTST",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"LGPMLGTST",e);a=S;}else{a=s;}var l=a.getProperty('LGPMLGTST',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(l);}}}),new sap.m.Text({text:{path:"KOBMLGTST",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"KOBMLGTST",e);a=S;}else{a=s;}var k=a.getProperty('KOBMLGTST',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(k);}}}),new sap.m.Text({text:{path:"LPMIN",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"LPMIN",e);a=S;}else{a=s;}var l=a.getProperty('LPMIN',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(l);}}}),new sap.m.Text({text:{path:"LPMAX",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"LPMAX",e);a=S;}else{a=s;}var l=a.getProperty('LPMAX',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(l);}}}),new sap.m.Text({text:{path:"MAMNG",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"MAMNG",e);a=S;}else{a=s;}var m=a.getProperty('MAMNG',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(m);}}}),new sap.m.Text({text:{path:"NSMNG",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"NSMNG",e);a=S;}else{a=s;}var n=a.getProperty('NSMNG',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(n);}}}),new sap.m.Text({text:{path:"RDMNG",formatter:function(){if(S!==""&&S!==undefined){fcg.mdg.approvecrv2.util.Formatter.handleMatCellBolding(this,S,"RDMNG",e);a=S;}else{a=s;}var r=a.getProperty('RDMNG',this.getBindingContext());return fcg.mdg.approvecrv2.util.Formatter.defaultMatValueChange(r);}}})]});var b=o.matHookgetWarehouseStorageTypeTemplate(i);if(b!==undefined){i=b;}return i;},getWarehouseDetailData:function(r){fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.executeWarehouseDetailQuery(r);this.aWarehouseDetailData=fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.getWarehouseDetailsData();return this.aWarehouseDetailData;},hideWarehouseSection:function(){this.oS3Controller=fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.getS3Instance();if(!this.oS3Controller.matHookHideWarehouseCentralSection()){if(sap.ui.getCore().byId("Txt_LVSME").getVisible()===false&&sap.ui.getCore().byId("Txt_VOMEM").getVisible()===false&&sap.ui.getCore().byId("Txt_MKAPV").getVisible()===false&&sap.ui.getCore().byId("Txt_BEZME").getVisible()===false&&sap.ui.getCore().byId("Txt_PLKMLGNST").getVisible()===false&&sap.ui.getCore().byId("MatWarehouseCentral")!==undefined){sap.ui.getCore().byId("MatWarehouseCentral").destroy();}}if(!this.oS3Controller.matHookHideWarehousePalletSection()){if(sap.ui.getCore().byId("Txt_LHMG1").getVisible()===false&&sap.ui.getCore().byId("Txt_LE1MLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_LHMG2").getVisible()===false&&sap.ui.getCore().byId("Txt_LE2MLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_LHMG3").getVisible()===false&&sap.ui.getCore().byId("Txt_LE3MLGNST").getVisible()===false&&sap.ui.getCore().byId("Mat_Pallet_Data")!==undefined){sap.ui.getCore().byId("Mat_Pallet_Data").destroy();}}if(!this.oS3Controller.matHookHideWarehouseStorageSection()){if(sap.ui.getCore().byId("Txt_LTAMLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_LTEMLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_LGBMLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_BLOMLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_BSSMLGNST").getVisible()===false&&sap.ui.getCore().byId("Txt_L2SKR").getVisible()===false&&sap.ui.getCore().byId("Txt_KZMBF").getVisible()===false&&sap.ui.getCore().byId("Txt_KZZUL").getVisible()===false&&sap.ui.getCore().byId("Mat_Storage_Strategies")!==undefined){sap.ui.getCore().byId("Mat_Storage_Strategies").destroy();}}},setGetWarehouseHeader:function(r){var w=r.results[0].LGNUM;var W=r.results[0].LGNUM__TXT;var v=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(w,W);v=this.i18n.getText("Warehouse")+": "+v;return v;}};
