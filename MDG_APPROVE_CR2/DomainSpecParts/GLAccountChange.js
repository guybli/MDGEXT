/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccount");fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange={oGLAccountGeneralTable:"",oGLAccountGeneralDescTable:"",oGLAccountChangeForm:"",oGLAccountCompCodeTable:"",oGLAccountCostElemTable:"",oGLAccountCostElemDescTable:"",oGLAccountIndTable:"",oGLAccountDescTable:"",aDetailData:"",nodata:"",oGlAttachment:"",oCCAttachment:"",oCEAttachment:"",vLinkPressed:"",oS3Controller:"",oItemTemp:"",oItemTemp2:"",oItemTemp3:"",sStyleClass:"",newValue:"",oldValue:"",newValueTxt:"",oldValueTxt:"",vAttachmentDataFlag:false,i18n:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle(),initialize_Tables:function(s){this.sStyleClass="text_bold";this.oS3Controller=s;if(sap.ui.getCore().byId("glGeneralDataLayout")!==""){sap.ui.getCore().byId("glGeneralDataLayout").removeAllContent();}this.oGLAccountGeneralTable="";this.oGLAccountGeneralTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glGeneralDataLayout").addContent(this.oGLAccountGeneralTable);this.oGLAccountGeneralDescTable="";this.oGLAccountGeneralDescTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glGeneralDataDescLayout").addContent(this.oGLAccountGeneralDescTable);this.oGLAccountGeneralDescTable.setGrowing(true);sap.ui.getCore().byId("glGeneralAttachment").removeAllContent();this.oGlAttachment="";this.oGlAttachment=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glGeneralAttachment").addContent(this.oGlAttachment);var a=this.oGlAttachment.getColumns();var h=new sap.m.Label({text:this.i18n.getText("PC_DESCRIPTION")});a[0].setHeader(h);var A=new sap.m.Label({text:this.i18n.getText("GL_TT_ACC_ATT")});a[0].setHeader(A);this.oGlAttachment.setGrowing(true);this.oGlAttachment.setHeaderText(this.i18n.getText("PC_TIT_ATTACH"));},getDetailData:function(){return this.aDetailData;},getGenQuery:function(s,p,a){this.oS3Controller=a;var c=",ACCOUNT/ChangeData,ACCOUNT/ACCOUNT2DTxtACCOUNTRel/ChangeData,ACCOUNT/ACCOUNT2AtthACCOUNTRel/ChangeData";var q=p+"?$expand=ACCOUNT/ACCOUNT2AtthACCOUNTRel,ACCOUNT/ACCOUNT2DTxtACCOUNTRel"+c;return q;},getCCQuery:function(s,p,a){this.oS3Controller=a;var c=",ACCOUNT/ACCOUNT2ACCCCDETRel/ChangeData,ACCOUNT/ACCOUNT2ACCCCDETRel/ACCCCDET2AtthACCCCDETRel/ChangeData";var q=p+"?$expand=ACCOUNT/ACCOUNT2ACCCCDETRel,ACCOUNT/ACCOUNT2ACCCCDETRel/ACCCCDET2AtthACCCCDETRel"+c;return q;},getCEQuery:function(s,p,a){this.oS3Controller=a;var c=",ACCOUNT/ACCOUNT2CELEMRel/ChangeData,ACCOUNT/ACCOUNT2CELEMRel/CELEM2DTxtCELEMRel/ChangeData,ACCOUNT/ACCOUNT2CELEMRel/CELEM2AtthCELEMRel/ChangeData";var q=p+"?$expand=ACCOUNT/ACCOUNT2CELEMRel,ACCOUNT/ACCOUNT2CELEMRel/CELEM2AtthCELEMRel,ACCOUNT/ACCOUNT2CELEMRel/CELEM2DTxtCELEMRel,ACCOUNT/ACCOUNT2CELEMRel/CELEM2ACCOUNTRel"+c;return q;},displayGenChangeData:function(r,v){var g={results:[]};var G={results:[]};if(r.ACCOUNT.ChangeData!==undefined){for(var i=0;i<r.ACCOUNT.ChangeData.results.length;i++){r.ACCOUNT.ChangeData.results[i].EntityDesc=r.ACCOUNT.TXTSH+" ("+r.ACCOUNT.COA+"/"+r.ACCOUNT.ACCOUNT+")";var n=r.ACCOUNT.ChangeData.results[i].NewValue;var o=r.ACCOUNT.ChangeData.results[i].OldValue;var a=r.ACCOUNT.ChangeData.results[i].NewValueText;var b=r.ACCOUNT.ChangeData.results[i].OldValueText;r.ACCOUNT.ChangeData.results[i].NewValue=this.getValue(n,a);r.ACCOUNT.ChangeData.results[i].OldValue=this.getValue(o,b);g.results.push(r.ACCOUNT.ChangeData.results[i]);}}if(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel!==undefined){for(i=0;i<r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results.length;i++){if(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData!==undefined){for(var j=0;j<r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results.length;j++){n=r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].NewValue;o=r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].OldValue;a=r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].NewValueText;b=r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].OldValueText;r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].NewValue=this.getValue(n,a);r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j].OldValue=this.getValue(o,b);G.results.push(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results[i].ChangeData.results[j]);}}}}if(g.results.length===0){sap.ui.getCore().byId("glGeneralDataLayout").removeAllContent();}else{var c=new sap.ui.model.json.JSONModel();c.setData(g);this.oGLAccountGeneralTable.setModel(c);this.oItemTemp=this.changeTableTemplate();this.oItemTemp.attachPress({Entity:r,name:"glItemDetail"},v.navtoSubDetail,v);this.oGLAccountGeneralTable.bindItems('/results',this.oItemTemp,'','');}if(G.results.length===0){sap.ui.getCore().byId("glGeneralDataDescLayout").removeAllContent();}else{var d=new sap.ui.model.json.JSONModel();d.setData(G);this.oGLAccountGeneralDescTable.setModel(d);this.oItemTemp=this.changeTableTemplate();this.oItemTemp.attachPress({Entity:r,name:"glItemDetail"},v.navtoSubDetail,v);this.oGLAccountGeneralDescTable.bindItems('/results',this.oItemTemp,'','');this.oGLAccountGeneralDescTable.setHeaderText(this.i18n.getText("PC_DESC_COL_NAME"));}this.vAttachmentDataFlag=false;this.changeAccAttachmentTable(r,v);if(g.results.length===0&&G.results.length===0&&this.vAttachmentDataFlag){var e=new sap.m.Text("glNoGenData");e.setText(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("NodataCreate"));sap.ui.getCore().byId("glGeneralDataLayout").addContent(e);}},displayCCChangeData:function(r,v){if(sap.ui.getCore().byId("glCCDataLayout")!==""){sap.ui.getCore().byId("glCCDataLayout").removeAllContent();}this.oGLAccountCompCodeTable="";this.oGLAccountCompCodeTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glCCDataLayout").addContent(this.oGLAccountCompCodeTable);this.oGLAccountCompCodeTable.setGrowing(true);sap.ui.getCore().byId("glCCAttachment").removeAllContent();this.oCCAttachment="";this.oCCAttachment=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glCCAttachment").addContent(this.oCCAttachment);var a=this.oCCAttachment.getColumns();var h=new sap.m.Label({text:this.i18n.getText("PC_DESCRIPTION")});a[0].setHeader(h);var A=new sap.m.Label({text:this.i18n.getText("ConDescr")});a[0].setHeader(A);this.oCCAttachment.setGrowing(true);this.oCCAttachment.setHeaderText(this.i18n.getText("PC_TIT_ATTACH"));var c={results:[]};if(r.ACCOUNT.ACCOUNT2ACCCCDETRel!==undefined){for(var i=0;i<r.ACCOUNT.ACCOUNT2ACCCCDETRel.results.length;i++){if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData!==undefined){for(var j=0;j<r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results.length;j++){var n;if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].Attribute==="ACCICFREQ"&&r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].NewValue==="00"){n="("+sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("PC_DELETED")+")";}else{n=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].NewValue;}var o="";if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].Attribute==="ACCICFREQ"&&r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].OldValue==="00"){o="("+sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("PC_NOT_MAIN")+")";}else{o=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].OldValue;}var b=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].NewValueText;var d=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].OldValueText;r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].NewValue=this.getValue(n,b);r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j].OldValue=this.getValue(o,d);c.results.push(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ChangeData.results[j]);}}}}if(c.results.length===0){sap.ui.getCore().byId("glCCDataLayout").removeAllContent();}else{var C=new sap.ui.model.json.JSONModel();C.setData(c);this.oGLAccountCompCodeTable.setModel(C);this.oItemTemp2=this.changeTableTemplate();this.oItemTemp2.attachPress({Entity:c,name:"GLCompanyCode"},v.navtoSubDetail,v);this.oGLAccountCompCodeTable.bindItems('/results',this.oItemTemp2,'');}this.vAttachmentDataFlag=false;this.changeCCAttachmentTable(r,v);if(c.results.length===0&&this.vAttachmentDataFlag){var e=new sap.m.Text("glNoCCData");e.setText(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("NodataCreate"));sap.ui.getCore().byId("glCCDataLayout").addContent(e);}},displayCEChangeData:function(r,v){if(sap.ui.getCore().byId("glCEDataLayout")!==""){sap.ui.getCore().byId("glCEDataLayout").removeAllContent();}this.oGLAccountCostElemTable="";this.oGLAccountCostElemTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glCEDataLayout").addContent(this.oGLAccountCostElemTable);this.oGLAccountCostElemTable.setGrowing(true);this.oGLAccountCostElemDescTable="";this.oGLAccountCostElemDescTable=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glCEDescDataLayout").addContent(this.oGLAccountCostElemDescTable);this.oGLAccountCostElemTable.setGrowing(true);sap.ui.getCore().byId("glCEAttachment").removeAllContent();this.oCEAttachment="";this.oCEAttachment=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Tablereuse',this);sap.ui.getCore().byId("glCEAttachment").addContent(this.oCEAttachment);var a=this.oCEAttachment.getColumns();var h=new sap.m.Label({text:this.i18n.getText("PC_DESCRIPTION")});a[0].setHeader(h);var A=new sap.m.Label({text:this.i18n.getText("ConDescr")});a[0].setHeader(A);this.oCEAttachment.setGrowing(true);this.oCEAttachment.setHeaderText(this.i18n.getText("PC_TIT_ATTACH"));var c={results:[]};var C={results:[]};if(r.ACCOUNT.ACCOUNT2CELEMRel!==undefined){for(var i=0;i<r.ACCOUNT.ACCOUNT2CELEMRel.results.length;i++){if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData!==undefined){for(var j=0;j<r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results.length;j++){var n=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].NewValue;var o=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].OldValue;var b=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].NewValueText;var d=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].OldValueText;r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].NewValue=this.getValue(n,b);r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j].OldValue=this.getValue(o,d);c.results.push(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].ChangeData.results[j]);}}}}if(r.ACCOUNT.ACCOUNT2CELEMRel!==undefined){for(i=0;i<r.ACCOUNT.ACCOUNT2CELEMRel.results.length;i++){if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel!==undefined){for(j=0;j<r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results.length;j++){if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData!==undefined){for(var k=0;k<r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results.length;k++){n=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].NewValue;o=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].OldValue;b=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].NewValueText;d=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].OldValueText;r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].NewValue=this.getValue(n,b);r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k].OldValue=this.getValue(o,d);C.results.push(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2DTxtCELEMRel.results[j].ChangeData.results[k]);}}}}}}if(c.results.length===0){sap.ui.getCore().byId("glCEDataLayout").removeAllContent();}else{var e=new sap.ui.model.json.JSONModel();e.setData(c);this.oGLAccountCostElemTable.setModel(e);this.oItemTemp3=this.changeTableTemplate();this.oItemTemp3.attachPress({Entity:c,name:"GLCostEl"},v.navtoSubDetail,v);this.oGLAccountCostElemTable.bindItems('/results',this.oItemTemp3,'');}if(C.results.length===0){sap.ui.getCore().byId("glCEDescDataLayout").removeAllContent();}else{var f=new sap.ui.model.json.JSONModel();f.setData(C);this.oGLAccountCostElemDescTable.setModel(f);this.oItemTemp3=this.getCEDescTableTemplate(f);this.oItemTemp3.attachPress({Entity:C,name:"GLCostEl"},v.navtoSubDetail,v);this.oGLAccountCostElemDescTable.bindItems('/results',this.oItemTemp3,'');this.oGLAccountCostElemDescTable.setHeaderText(this.i18n.getText("PC_DESC_COL_NAME"));}this.vAttachmentDataFlag=false;this.changeCEAttachmentTable(r,v);if(c.results.length===0&&C.results.length===0&&this.vAttachmentDataFlag){var g=new sap.m.Text("glNoCEData");g.setText(sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("NodataCreate"));sap.ui.getCore().byId("glCEDataLayout").addContent(g);}},getValue:function(V,a){var f="";if(V!==""&&a!==""){if(V==="X"&&a===sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("PC_YES")){f=a;}else{f=a+"("+V+")";}}if(V===""&&a!==""){f=a;}if(V!==""&&a===""){f=V;}if(V==="X"&&a===""){f=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("PC_YES");}return f;},changeTableTemplate:function(){var i=new sap.m.ColumnListItem({type:"Navigation",cells:[new sap.m.Text({text:"{Context}"}).addStyleClass("text_bold"),new sap.m.ObjectIdentifier({text:{path:"AttributeDesc"},title:{path:"NewValue"}}),new sap.m.Text({text:{path:"OldValue"}})]});var e=this.oS3Controller.glHookchangeTableTemplate(i);if(e!==undefined){i=e;}return i;},setBoldGenData:function(r){for(var i=0;i<r.ACCOUNT.ChangeData.results.length;i++){var l="LBL_"+r.ACCOUNT.ChangeData.results[i].Attribute;if(r.ACCOUNT.ChangeData.results[i].Attribute==="TXTSH"){l="LBL_ACCOUNT";}var L=sap.ui.getCore().byId(l);if(L!==undefined){L.setDesign("Bold");}var t="TXT_"+r.ACCOUNT.ChangeData.results[i].Attribute;if(r.ACCOUNT.ChangeData.results[i].Attribute==="TXTSH"){t="TXT_ACCOUNT";}if(sap.ui.getCore().byId(t)!==undefined){sap.ui.getCore().byId(t).addStyleClass(this.sStyleClass);}}},setBoldCCData:function(r){for(var j=0;j<r.ChangeData.results.length;j++){var l="LBL_"+r.ChangeData.results[j].Attribute;var L=sap.ui.getCore().byId(l);if(L!==undefined){L.setDesign("Bold");}var t="TXT_"+r.ChangeData.results[j].Attribute;if(sap.ui.getCore().byId(t)!==undefined){sap.ui.getCore().byId(t).addStyleClass(this.sStyleClass);}}},setBoldCEData:function(r){for(var j=0;j<r.ChangeData.results.length;j++){if(r.ChangeData.results[j].Attribute==='TXTSH')var l="LBL_CELEM";else var l="LBL_"+r.ChangeData.results[j].Attribute;var L=sap.ui.getCore().byId(l);if(L!==undefined){L.setDesign("Bold");}if(r.ChangeData.results[j].Attribute==='TXTSH')var t="TXT_CELEM";else var t="TXT_"+r.ChangeData.results[j].Attribute;if(sap.ui.getCore().byId(t)!==undefined){sap.ui.getCore().byId(t).addStyleClass(this.sStyleClass);}}},changeAccAttachmentTable:function(r,v){var o="";var n="";var a="";var O="";var N="";var l="";this.oGlAttachment.attachItemPress({Entity:r,name:'glItemDetail'},v.navtoSubDetail,v);for(var i=0;i<r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results.length;i++){for(var j=0;j<r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results.length;j++){var g=this;var L="";if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].EntityAction!=='D'){if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_LINK!==""){L=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_LINK;}else{L=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].__metadata.media_src;}}var A=new sap.m.Link({text:r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:false,press:function(){g.setLinkPress('X');}}).addStyleClass("padding_bottom");var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var c=" "+r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_ACREATED_BY__TXT+"("+r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_ACREATED_BY+")";var C=new sap.m.Text({text:f+" "+c});var b=new sap.ui.layout.VerticalLayout({content:[A,C]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_FILE_TYPE);var d=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[d,b]});if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].EntityAction==='C'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_ADDED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oGlAttachment.addItem(l);}else if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].EntityAction==='D'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_DELETED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oGlAttachment.addItem(l);}else{if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].Attribute==='USMD_EXPLANATION'||r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].Attribute==='USMD_LANGUAGE'){if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].OldValue===""){o="("+this.i18n.getText("PC_NOT_MAIN")+")";}else{o=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].OldValue;}if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].NewValue===""&&r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].OldValue!==""){n=this.i18n.getText("PC_DELETED");}else if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].NewValue!==""){n=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].NewValue;}if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results[j].Attribute==='USMD_EXPLANATION'){a=this.i18n.getText("ATTACH_COMMENT");}else{a=this.i18n.getText("Language");}N=new sap.m.ObjectIdentifier({text:a,title:n});O=new sap.m.Text({text:o});l=new sap.m.ColumnListItem({type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oGlAttachment.addItem(l);}}}}if(this.oGlAttachment.getItems().length===0){this.vAttachmentDataFlag=true;sap.ui.getCore().byId("glGeneralAttachment").removeAllContent();sap.ui.getCore().byId("glGeneralAttachment").destroy();}},changeCCAttachmentTable:function(r,v){var o="";var n="";var a="";var O="";var N="";var l="";this.oCCAttachment.attachItemPress({Entity:r,name:"GLCompanyCodeAttach"},v.navtoSubDetail,v);for(var i=0;i<r.ACCOUNT.ACCOUNT2ACCCCDETRel.results.length;i++){for(var j=0;j<r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results.length;j++){for(var k=0;k<r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results.length;k++){var g=this;var L="";if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].EntityAction!=='D'){if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].USMD_LINK!==""){L=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].USMD_LINK;}else{L=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].__metadata.media_src;}}var A=new sap.m.Link({text:r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:false,press:function(){g.setLinkPress('X');}}).addStyleClass("padding_bottom");var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var c=" "+r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].USMD_ACREATED_BY__TXT+"("+r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].USMD_ACREATED_BY+")";var C=new sap.m.Text({text:f+" "+c});var t=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].COMPCODE__TXT+" ("+r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].COMPCODE+")";var b=new sap.m.ObjectIdentifier({text:this.i18n.getText("CC_CCODE"),title:t}).addStyleClass("objIdentifier_margin").addStyleClass("objectIdentifier_text");var d=new sap.ui.layout.VerticalLayout({content:[A,C,b]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].USMD_FILE_TYPE);var e=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[e,d]});if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].EntityAction==='C'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_ADDED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({id:"idattachment_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oCCAttachment.addItem(l);}else if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].EntityAction==='D'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_DELETED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({id:"idattachment_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oCCAttachment.addItem(l);}else{if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].Attribute==='USMD_EXPLANATION'||r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].Attribute==='USMD_LANGUAGE'){if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].OldValue===""){o="("+this.i18n.getText("PC_NOT_MAIN")+")";}else{o=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].OldValue;}if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].NewValue===""&&r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].OldValue!==""){n=this.i18n.getText("PC_DELETED");}else if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].NewValue!==""){n=r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].NewValue;}if(r.ACCOUNT.ACCOUNT2ACCCCDETRel.results[i].ACCCCDET2AtthACCCCDETRel.results[j].ChangeData.results[k].Attribute==='USMD_EXPLANATION'){a=this.i18n.getText("ATTACH_COMMENT");}else{a=this.i18n.getText("Language");}N=new sap.m.ObjectIdentifier({text:a,title:n});O=new sap.m.Text({text:o});l=new sap.m.ColumnListItem({id:"idattachment_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[h,N,O]});this.oCCAttachment.addItem(l);}}}}}if(this.oCCAttachment.getItems().length===0){this.vAttachmentDataFlag=true;sap.ui.getCore().byId("glCCAttachment").removeAllContent();sap.ui.getCore().byId("glCCAttachment").destroy();}},changeCEAttachmentTable:function(r,v){var o="";var n="";var a="";var O="";var N="";var l="";var c={results:[]};this.oCEAttachment.attachItemPress({Entity:r,name:'GLCostElAttach'},v.navtoSubDetail,v);for(var i=0;i<r.ACCOUNT.ACCOUNT2CELEMRel.results.length;i++){for(var j=0;j<r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results.length;j++){for(var k=0;k<r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results.length;k++){var g=this;var L="";if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].EntityAction!=='D'){if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_LINK!==""){L=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_LINK;}else{L=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].__metadata.media_src;}}var A=new sap.m.Link({text:r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:false,press:function(){g.setLinkPress('X');}}).addStyleClass("padding_bottom");var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var C=" "+r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_ACREATED_BY__TXT+"("+r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_ACREATED_BY+")";var b=new sap.m.Text({text:f+" "+C});var t=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM__TXT+" ("+r.ACCOUNT.ACCOUNT2CELEMRel.results[i].COAREA+"/"+fcg.mdg.approvecrv2.util.Formatter.removeLeadingZeros(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM)+")";var d=new sap.m.ObjectIdentifier({text:this.i18n.getText("CostElem"),title:t}).addStyleClass("objIdentifier_margin").addStyleClass("objectIdentifier_text");var e=new sap.ui.layout.VerticalLayout({content:[A,b,d]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].USMD_FILE_TYPE);var h=new sap.ui.core.Icon({src:I,size:"3.0em"});var m=new sap.m.HBox({items:[h,e]});if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].EntityAction==='C'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_ADDED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({id:"idattachments_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[m,N,O]});this.oCEAttachment.addItem(l);c.results.push(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k]);}else if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].EntityAction==='D'){N=new sap.m.ObjectIdentifier({text:" ",title:this.i18n.getText("PC_DELETED")});O=new sap.m.Text({text:""});l=new sap.m.ColumnListItem({id:"idattachments_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[m,N,O]});this.oCEAttachment.addItem(l);c.results.push(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k]);}else{if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].Attribute==='USMD_EXPLANATION'||r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].Attribute==='USMD_LANGUAGE'){if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].OldValue===""){o="("+this.i18n.getText("PC_NOT_MAIN")+")";}else{o=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].OldValue;}if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].NewValue===""&&r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].OldValue!==""){n=this.i18n.getText("PC_DELETED");}else if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].NewValue!==""){n=r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].NewValue;}if(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k].Attribute==='USMD_EXPLANATION'){a=this.i18n.getText("ATTACH_COMMENT");}else{a=this.i18n.getText("Language");}N=new sap.m.ObjectIdentifier({text:a,title:n});O=new sap.m.Text({text:o});l=new sap.m.ColumnListItem({id:"idattachments_"+i+"_"+j,type:"Navigation",mergeDuplicates:true,cells:[m,N,O]});c.results.push(r.ACCOUNT.ACCOUNT2CELEMRel.results[i].CELEM2AtthCELEMRel.results[j].ChangeData.results[k]);this.oCEAttachment.addItem(l);}}}}}if(this.oCEAttachment.getItems().length===0){this.vAttachmentDataFlag=true;sap.ui.getCore().byId("glCEAttachment").removeAllContent();sap.ui.getCore().byId("glCEAttachment").destroy();}},getChangeGenAttachmentList:function(r){var a=sap.ui.getCore().byId("glAttachFileList");var c=new sap.m.CustomListItem({});var C="";var l="";for(var i=0;i<r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results.length;i++){var L="";if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_LINK!=="")L=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_LINK;else L=r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].__metadata.media_src;var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var v=" "+r.ACCOUNT.USMD_ENT_CHNG__TXT;var b="";for(var j=0;j<r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].ChangeData.results.length;j++){b=f+" "+v;break;}if(b!==""){C=new sap.m.Text({text:f+" "+v}).addStyleClass("text_bold");l=true;}else{C=new sap.m.Text({text:f+" "+v});l=false;}var A=new sap.m.Link({text:r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:l}).addStyleClass("padding_bottom");var d=new sap.m.VBox({items:[A,C]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results[i].USMD_FILE_TYPE);var o=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[o,d]}).addStyleClass("Hbox_padding");c.addContent(h);a.addItem(c);}},getChangeCEAttachmentList:function(c){var a=sap.ui.getCore().byId("glCostElAttach");var C=new sap.m.CustomListItem({});var o="";var l="";for(var i=0;i<c.results.length;i++){var L="";if(c.results[i].USMD_LINK!=="")L=c.results[i].USMD_LINK;else L=c.results[i].__metadata.media_src;var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(c.results[i].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var v=" "+fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.oCEData.ACCOUNT.USMD_ENT_CRTD_BY__TXT;var b="";for(var j=0;j<c.results[i].ChangeData.results.length;j++){b=f+" "+v;break;}if(b!==""){o=new sap.m.Text({text:f+" "+v}).addStyleClass("text_bold");l=true;}else{o=new sap.m.Text({text:f+" "+v});l=false;}var A=new sap.m.Link({text:c.results[i].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:l}).addStyleClass("padding_bottom");var d=new sap.m.VBox({items:[A,o]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(c.results[i].USMD_FILE_TYPE);var e=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[e,d]}).addStyleClass("Hbox_padding");C.addContent(h);a.addItem(C);}},getChangeCCAttachmentList:function(c){var a=sap.ui.getCore().byId("glCCAttach");var C=new sap.m.CustomListItem({});var o="";var l="";for(var i=0;i<c.results.length;i++){var L="";if(c.results[i].USMD_LINK!=="")L=c.results[i].USMD_LINK;else L=c.results[i].__metadata.media_src;var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(c.results[i].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var v=" "+fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.oCCData.ACCOUNT.USMD_ENT_CRTD_BY__TXT;var b="";for(var j=0;j<c.results[i].ChangeData.results.length;j++){b=f+" "+v;break;}if(b!==""){o=new sap.m.Text({text:f+" "+v}).addStyleClass("text_bold");l=true;}else{o=new sap.m.Text({text:f+" "+v});l=false;}var A=new sap.m.Link({text:c.results[i].USMD_TITLE,target:"_blank",href:L,wrapping:true,subtle:false,emphasized:l}).addStyleClass("padding_bottom");var d=new sap.m.VBox({items:[A,o]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(c.results[i].USMD_FILE_TYPE);var e=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[e,d]}).addStyleClass("Hbox_padding");C.addContent(h);a.addItem(C);}},getCEDescTableTemplate:function(m){var i=new sap.m.ColumnListItem({type:"Navigation",cells:[new sap.m.VBox({items:[new sap.m.ObjectIdentifier({text:{path:"Context",formatter:function(){var c=this.getBindingContext();var C=m.getProperty("Context",c);if(C!==undefined&&C.indexOf(";")>-1){var v=C.split(";");var a=v[0].split(":");return a[1];}else{if(C!==undefined&&C.indexOf(":")>-1){var v=C.split(":");return v[1];}}}},title:{path:"Context",formatter:function(){var c=this.getBindingContext();var C=m.getProperty("Context",c);if(C!==undefined&&C.indexOf(";")>-1){var v=C.split(";");var a=v[0].split(":");return a[0];}else{if(C!==undefined&&C.indexOf(":")>-1){var v=C.split(":");return v[0];}}}}}).addStyleClass("objectIdentifier_text"),new sap.m.ObjectIdentifier({text:{path:"Context",formatter:function(){var c=this.getBindingContext();var C=m.getProperty("Context",c);if(C!==undefined&&C.indexOf(";")>-1){var v=C.split(";");var a=v[1].split(":");return a[1];}else{return"";}}},title:{path:"Context",formatter:function(){var c=this.getBindingContext();var C=m.getProperty("Context",c);if(C!==undefined&&C.indexOf(";")>-1){var v=C.split(";");var a=v[1].split(":");return a[0];}else{return"";}}},visible:{path:"Context",formatter:function(){var c=this.getBindingContext();var C=m.getProperty("Context",c);if(C!==undefined&&C.indexOf(";")>-1){return true;}else{return false;}}}}).addStyleClass("objIdentifier_margin").addStyleClass("objectIdentifier_text")]}),new sap.m.ObjectIdentifier({text:{path:"AttributeDesc"},title:{path:"NewValue"}}),new sap.m.Text({text:{path:"OldValue"}})]});return i;},setLinkPress:function(v){this.vLinkPressed=v;},getLinkPress:function(){return this.vLinkPressed;}};
