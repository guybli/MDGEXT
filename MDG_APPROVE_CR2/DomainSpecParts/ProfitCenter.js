/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenter");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterChange");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenter={oBatchModel:"",sPctrServiceUrl:"",oS3Controller:null,loadLayout:function(s){s.getView().byId("page").removeContent(s.oCustomerDomain);s.getView().byId("page").removeContent(s.costCenterIconTab);s.getView().byId("page").removeContent(s.oSupplierDomain);s.getView().byId("page").removeContent(s.profitCenterIconTab);s.getView().byId("page").removeContent(s.glAccountIconTab);s.getView().byId("page").removeContent(s.oMaterialIconTab);try{sap.ui.getCore().byId("pcFileUpload-1-uploader").destroy();}catch(e){}try{sap.ui.getCore().byId("pcFileUpload-uploader").destroy();}catch(e){}this.oS3Controller=s;if(s.profitCenterIconTab===""){s.profitCenterIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.ProfitCenter',s);}else{s.profitCenterIconTab.destroy();try{s.costCenterIconTab.destroy();s.oMaterialIconTab.destroy();s.oCustomerDomain.destroy();s.oSupplierDomain.destroy();s.glAccountIconTab.destroy();}catch(e){}s.profitCenterIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.ProfitCenter',s);}s.getView().byId("page").addContent(s.profitCenterIconTab);this.oBatchModel=s.getView().getModel("MDG_FINANCIALS");this.sPctrServiceUrl=this.oBatchModel.sServiceUrl+"/";var a=s.pcHookPCCustomService(this.sPctrServiceUrl);if(a!==undefined){this.sPctrServiceUrl=a;}},getS3Instance:function(){return this.oS3Controller;},displayData:function(v,b,p,a,s){var l=this;var q="";var n="";var i=sap.ui.getCore().byId("profitCenterNotes");var I=sap.ui.getCore().byId("profitCenterAttachments");s.setNoteAttachIconTab(i,I);if(a==="CHANGE"){q=fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterChange.getQueries(this.sPctrServiceUrl,p,s);}else if(a==='CREATE'){q=fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate.getQueries(this.sPctrServiceUrl,p,s);}q="/"+q;fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,q,b);var c=p.split("(");var C=c[1].split(")");var u="Decisions?Crequest="+C[0];var d="/"+u;if(!s.oApplicationFacade.isMock()){fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,d,b);}fcg.mdg.approvecrv2.util.DataAccess.performSubmitBatch(this.oBatchModel,s);var r=fcg.mdg.approvecrv2.util.DataAccess.getBatchData();if(!s.oApplicationFacade.isMock()){if(r[1].headers!==undefined&&r[1].headers.usmd1a016!==undefined){s.setCrLockError(r[1].headers.usmd1a016);s.createDecisionButtons(r[1].data.results,s,"",true);}else{if(r[1].data!==undefined)s.createDecisionButtons(r[1].data.results,s);else s.createDecisionButtons([],s);}if(r[1].headers!==undefined&&r[1].headers.mdg_gw_approve_cr009!==undefined){s.setCrRejected(r[1].headers.mdg_gw_approve_cr009);}}if(r[0]!==undefined&&r[0].data!==undefined){if(a==='CREATE'){fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate.initialize_Forms(this.oS3Controller);fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate.displayFormData(r[0].data,l,s);}else if(a==='CHANGE'){fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterChange.initialize_Tables(this.oS3Controller);fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterChange.displayTableData(r[0].data,l,s);}}else{sap.ui.getCore().byId("profitCenterGenTab").setVisible(false);}},hideSections:function(r){if(r.PCTR.PC_ANRED===""&&r.PCTR.PC_NAME1===""&&r.PCTR.PC_NAME2===""&&r.PCTR.PC_NAME3===""&&r.PCTR.PC_NAME4===""&&r.PCTR.PC_STRAS===""&&r.PCTR.PC_PSTLZ===""&&r.PCTR.PC_ORT01===""&&r.PCTR.PC_ORT02===""&&r.PCTR.PC_LAND1===""&&r.PCTR.PC_REGION===""&&r.PCTR.PC_PSTL2===""&&r.PCTR.PCTRTXJCD===""){this.oS3Controller.pcHookPCHideCreateAddressSection();}}};
