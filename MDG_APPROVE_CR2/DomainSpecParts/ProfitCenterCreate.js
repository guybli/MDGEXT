/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenter");fcg.mdg.approvecrv2.DomainSpecParts.ProfitCenterCreate={oProfitCenterCreateForm:"",oS3Controller:"",i18n:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle(),initialize_Forms:function(s){this.oS3Controller=s;if(this.oProfitCenterCreateForm===""){this.oProfitCenterCreateForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.ProfitCenterCreate',fcg.mdg.approvecrv2.util.Formatter);}else{this.oProfitCenterCreateForm.destroy();this.oProfitCenterCreateForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.ProfitCenterCreate',fcg.mdg.approvecrv2.util.Formatter);}sap.ui.getCore().byId("pcCreateDataLayout").removeAllContent();sap.ui.getCore().byId("pcCreateDataLayout").addContent(this.oProfitCenterCreateForm);},getQueries:function(s,p,a){this.oS3Controller=a;var q=p+"?$expand=PCTR,PCTR/PCTR2DTxtPCTRRel,PCTR/PCTR2PCCCASSRel,PCTR/PCTR2AtthPCTRRel,"+"PCTR/CD_PCTRPCTRN,PCTR/CD_PCTRRESPU,PCTR/CD_COAREA,PCTR/CD_PC_LAND1,PCTR/CD_PC_REGION,PCTR/CD_PC_SPRAS,PCTR/CD_PCTRTXJCD,PCTR/CD_PCTRSEG,PCTR/PCTR2DTxtPCTRRel/CD_LANGU,PCTR/PCTR2PCCCASSRel/CD_COMPCODE,PCTR/PCTR2AtthPCTRRel/CD_USMD_ACREATED_BY";var e=this.oS3Controller.pcHookPCCreateQuery(q);if(e!==undefined){q=e;}return q;},displayFormData:function(r){var e=this.oS3Controller.pcHookModifyPCCreateFormData(r);var a="";if(e!==undefined){r=e;}var d=new sap.ui.model.json.JSONModel();d.setData(r);sap.ui.getCore().byId("pcCreateSimpleForm").setModel(d);sap.ui.getCore().byId("pcDescriptionTable").setModel(d);sap.ui.getCore().byId("pcCompCodeTable").setModel(d);var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{CD_LANGU/Description} ({CD_LANGU/Code})"}),new sap.m.Text({text:{path:"TXTSH",formatter:fcg.mdg.approvecrv2.util.Formatter.noValue}}),new sap.m.Text({text:{path:"TXTMI",formatter:fcg.mdg.approvecrv2.util.Formatter.noValue}})]});sap.ui.getCore().byId("pcDescriptionTable").bindItems('/PCTR/PCTR2DTxtPCTRRel/results',i,'','');a=this.oS3Controller.pcHookPCCreateDescTemplate(i);if(a!==undefined){i=a;}var c=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:"{CD_COMPCODE/Description} ({COMPCODE})"}),new sap.m.Text({text:{path:"PCTRCCASS",formatter:fcg.mdg.approvecrv2.util.Formatter.checkBox}})]});sap.ui.getCore().byId("pcCompCodeTable").bindItems('/PCTR/PCTR2PCCCASSRel/results',c,'','');a=this.oS3Controller.pcHookPCCreateCompCodeTemplate(c);if(a!==undefined){c=a;}if(r.PCTR.PCTR2AtthPCTRRel.results.length!==0)this._createPcAttachmentList(r);this.oS3Controller.pcHookAddPCData(r);this.hideSections(r);this.hideTable(r);},_createPcAttachmentList:function(r){var a=sap.ui.getCore().byId("pcAttachFileUpload");var c=new sap.m.CustomListItem({});for(var i=0;i<r.PCTR.PCTR2AtthPCTRRel.results.length;i++){var l="";if(r.PCTR.PCTR2AtthPCTRRel.results[i].USMD_LINK!=="")l=r.PCTR.PCTR2AtthPCTRRel.results[i].USMD_LINK;else l=r.PCTR.PCTR2AtthPCTRRel.results[i].__metadata.media_src;var f=fcg.mdg.approvecrv2.util.Formatter.dateFormatter(r.PCTR.PCTR2AtthPCTRRel.results[i].USMD_ACREATED_AT)+" "+this.i18n.getText('AttachBy')+" ";var C=" "+r.PCTR.PCTR2AtthPCTRRel.results[i].CD_USMD_ACREATED_BY.Description+"("+r.PCTR.PCTR2AtthPCTRRel.results[i].CD_USMD_ACREATED_BY.Code+")";var o=new sap.m.Text({text:f+" "+C});var A=new sap.m.Link({text:r.PCTR.PCTR2AtthPCTRRel.results[i].USMD_TITLE,target:"_blank",href:l,wrapping:true,subtle:false,emphasized:false}).addStyleClass("padding_bottom");var v=new sap.m.VBox({items:[A,o]}).addStyleClass("padding_left");var I=fcg.mdg.approvecrv2.util.Formatter.mimeTypeFormatter(r.PCTR.PCTR2AtthPCTRRel.results[i].USMD_FILE_TYPE);var b=new sap.ui.core.Icon({src:I,size:"3.0em"});var h=new sap.m.HBox({items:[b,v]}).addStyleClass("Hbox_padding");c.addContent(h);a.addItem(c);}},hideSections:function(r){if(r.PCTR.PC_ANRED===""&&r.PCTR.PC_NAME1===""&&r.PCTR.PC_NAME2===""&&r.PCTR.PC_NAME3===""&&r.PCTR.PC_NAME4===""&&r.PCTR.PC_STRAS===""&&r.PCTR.PC_PSTLZ===""&&r.PCTR.PC_ORT01===""&&r.PCTR.PC_ORT02===""&&r.PCTR.PC_LAND1===""&&r.PCTR.PC_REGION===""&&r.PCTR.PC_PSTL2===""&&r.PCTR.PCTRTXJCD===""){this.oS3Controller.pcHookPCHideCreateAddressSection();}if(r.PCTR.PC_TELF1===""&&r.PCTR.PC_SPRAS===""&&r.PCTR.PC_DATLT===""&&r.PCTR.PC_TELF2===""&&r.PCTR.PC_TELFX===""&&r.PCTR.PC_TELTX===""&&r.PCTR.PC_TELX1===""&&r.PCTR.PC_TELBX===""&&r.PCTR.PC_DRNAM===""){this.oS3Controller.pcHookHidePCCreateCommSection();}if(r.PCTR.PCTRLKIND===""){sap.ui.getCore().byId("pcInd").destroy();}},hideTable:function(r){if(r.PCTR.PCTR2PCCCASSRel.results.length===0)sap.ui.getCore().byId("pcCompCodeTable").setVisible(false);if(r.PCTR.PCTR2DTxtPCTRRel.results.length===0)sap.ui.getCore().byId("pcDescriptionTable").setVisible(false);if(r.PCTR.PCTR2AtthPCTRRel.results.length===0)sap.ui.getCore().byId("pcAttachFileUpload").setVisible(false);}};
