/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.util.DataAccess");fcg.mdg.approvecrv2.util.DataAccess={aData:[],oBaseController:"",vApprovePopup:"",sIndex:"",aEntities:[],vCReq:"",vRemoveProcessedCR:"",vCRData:{ChangeRequest:"",Entities:[]},aSyncData:[],initialize:function(b){this.oBaseController=b;},removeItemFromTaskModel:function(m,c){this.sIndex=this.oBaseController.findNextVisibleItem(m,c);},addBatchOperation:function(m,p,b){var B=m.createBatchOperation(p,"GET");b.push(B);m.clearBatch();m.addBatchReadOperations(b);},performSubmitBatch:function(m,s){var l=this;var e=false;var i="";this.aData=[];m.submitBatch(function(o,r){var a="";var c="";for(i=0;i<r.data.__batchResponses.length;i++){var d=r.data.__batchResponses[i];l.aData.push(d);if(d.response!==undefined){for(i=0;i<jQuery.parseJSON(d.response.body).error.innererror.errordetails.length;i++){if(a!==""){a=a+"\n";}a=a+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].message;c=c+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].code;e=true;}}}if(s!==undefined){s.setFinOdataError(e,a,c);}},null,false);},setTaskStatusCompleted:function(){if(this.sIndex!=="-1"){var t=this.oBaseController.getView().getModel("i18n").getProperty("SUBMITTED");this.oBaseController.getList().getItems()[this.sIndex].getAttributes()[1].setText(t);}},setObjectKey:function(o){if(fcg.mdg.approvecrv2.view.S2.prototype.oObjectKey!==""){fcg.mdg.approvecrv2.view.S2.prototype.oObjectKey="";fcg.mdg.approvecrv2.view.S2.prototype.oObjectKey=o;}else fcg.mdg.approvecrv2.view.S2.prototype.oObjectKey=o;},setApprovePopup:function(a){this.vApprovePopup=a;},setRelevantEntitiesForCR:function(c,o){this.vCRData.ChangeRequest=c;if(o!==undefined)this.vCRData.Entities=o.split("&");},setRemoveProcessedCR:function(r){this.vRemoveProcessedCR=r;},getBatchData:function(){return this.aData;},getObjectKey:function(){var o=fcg.mdg.approvecrv2.view.S2.prototype.oObjectKey;return o;},getApprovePopup:function(){return this.vApprovePopup;},getRemoveProcessedCR:function(){return this.vRemoveProcessedCR;},isEntityRelevant:function(c,e){if(this.vCRData.ChangeRequest===c){for(var i=0;i<this.vCRData.Entities.length;i++){if(e===this.vCRData.Entities[i]){return true;}}}else{return true;}return false;},resetAllContent:function(){this.aData=[];this.oBaseController="";this.vApprovePopup="";this.sIndex="";this.vCRData.ChangeRequest="";this.vCRData.Entities="";},readData:function(d,q){var r=null;d.read(q,null,null,false,function(D,a){r=a;},function(e){});return r;},performAsyncSubmitBatch:function(m,s){var l=this;var e=false;var i="";this.aSyncData=[];m.submitBatch(function(o,r){var a="";var c="";for(i=0;i<r.data.__batchResponses.length;i++){var d=r.data.__batchResponses[i];l.aSyncData.push(d);if(d.response!==undefined){for(i=0;i<jQuery.parseJSON(d.response.body).error.innererror.errordetails.length;i++){if(a!==""){a=a+"\n";}a=a+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].message;c=c+jQuery.parseJSON(d.response.body).error.innererror.errordetails[i].code;e=true;}}}if(s!==undefined){s.setFinOdataError(e,a,c);}},null,true);},getAsyncBatchData:function(){return this.aSyncData;},setAsyncBatchData:function(){this.aSyncData="";}};sap.ui.base.EventProvider.extend("fcg.mdg.approvecrv2.util.Access",fcg.mdg.approvecrv2.util.DataAccess);
