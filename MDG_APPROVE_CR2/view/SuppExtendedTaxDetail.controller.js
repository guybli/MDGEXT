/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("sap.ca.ui.message.message");jQuery.sap.require("sap.ca.ui.model.type.DateTime");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Customer");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.CustomerChange");sap.ca.scfld.md.controller.BaseDetailController.extend("fcg.mdg.approvecrv2.view.SuppExtendedTaxDetail",{compCode:"",oItemTemp:"",subheader:"",extHookdisplayWithhldTaxData:null,extHookModifyStyleClass:null,onInit:function(){this.getView().byId("SuppExtendedTaxPage").setShowNavButton(true);this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="SuppWithhldtax"){var s=fcg.mdg.approvecrv2.DomainSpecParts.Supplier.getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');fcg.mdg.approvecrv2.util.Formatter.resetFormBolding(this.getView());var a=e.getParameter("arguments");this.withtax=a.Key;var r=fcg.mdg.approvecrv2.DomainSpecParts.Supplier.getNavData();this.displaySuppWithhldTaxData(r);}},this);},displaySuppWithhldTaxData:function(r){var s="";for(var i=0;i<r.results.length;i++){if(r.results.length>1){this.subheader=fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.getSubheader(r.results[i].STANDARD,r.results[i].OBJECT_ID,r.results[i].REASON_ID__TXT);}else{this.subheader="";}for(var j=0;j<r.results[i].SP_AssignedCompanyCodesRel.results.length;j++){var a=r.results[i].SP_AssignedCompanyCodesRel.results[j];for(var k=0;k<a.SP_CompWithholdingTaxesRel.results.length;k++){var c=a.SP_CompWithholdingTaxesRel.results[k];var b=c.BUKRS;var w=c.WITHT;var d=c.ASSIGNMENT_ID+b+w;if(d===this.withtax){var e=a.BUKRS__TXT;e=e+"("+b+")";if(e!==undefined){e=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("CC_CCODE")+": "+e;}var f=c.WITHT__TXT+"("+c.WITHT+")";if(f!==undefined){f=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("witholdhldtax")+": "+f;}this.getView().byId("exTaxSuppObjHeaderDet").setTitle(f);this.getView().byId("erpCCVendTax").setText(e);var g=fcg.mdg.approvecrv2.util.DataAccess.getObjectKey();this.getView().byId("Suppbpdesc").setText(g);this.getView().byId("erpVendTax").setText(this.subheader);var F=c;var m=new sap.ui.model.json.JSONModel();m.setData(F);var E=this.getView().byId("SimpleSuppFormExTax");E.setModel(m);s="text_bold";if(c.ChangeData.results!==undefined&&c.ChangeData.results.length>0){s="text_bold";for(var l=0;l<c.ChangeData.results.length;l++){var L="lbl"+c.ChangeData.results[l].Attribute;var o=this.getView().byId(L);if(o!==undefined){o.setDesign("Bold");}var t=c.ChangeData.results[l].Attribute;if(this.getView().byId(t)!==undefined){this.getView().byId(t).addStyleClass(s);}}}}}}}},removeStyleClass:function(s){this.getView().byId("WT_WTSTCD").removeStyleClass(s);this.getView().byId("lblWT_WTSTCD").setDesign("Standard");this.getView().byId("WT_AGTDF").removeStyleClass(s);this.getView().byId("lblWT_AGTDF").setDesign("Standard");this.getView().byId("WT_WITHCD").removeStyleClass(s);this.getView().byId("lblWT_WITHCD").setDesign("Standard");this.getView().byId("WT_AGENT").removeStyleClass(s);this.getView().byId("lblWT_AGENT").setDesign("Standard");this.getView().byId("WT_AGTDT").removeStyleClass(s);this.getView().byId("lblWT_AGTDT").setDesign("Standard");}});
