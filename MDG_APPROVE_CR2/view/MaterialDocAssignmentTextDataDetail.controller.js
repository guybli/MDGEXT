/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("fcg.mdg.approvecrv2.util.Formatter");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Material.Material");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");sap.ca.scfld.md.controller.BaseDetailController.extend("fcg.mdg.approvecrv2.view.MaterialDocAssignmentTextDataDetail",{oDocAssignmentTextDetails:"",oDocAssignmentDetails:"",flag:0,oSalesOrgInstance:"",sRowId:"",sRow:"",strDocNum:"",strDocType:"",strLangucode:"",textData:"",aDocAssignmentDataLen:"",SalesDetailsTextTitle:"",vRouter:"",i18n:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle(),onInit:function(){sap.ca.scfld.md.controller.BaseDetailController.prototype.onInit.call(this);this.getView().byId("DocAssignmentTextDetailPage").setShowNavButton(true);this.oDataManager=sap.ca.scfld.md.app.Application.getImpl().getComponent().getDataManager();this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="matDocAssignmentTextDataDetail"){this.vRouter="matDocAssignmentTextDataDetail";var s=fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');this.loadDocAssignmentTextLayout();fcg.mdg.approvecrv2.util.Formatter.resetFormBolding(this.getView());this.sRowId=e.getParameter('arguments').RowId;this.bindTextData();this.setDocAssignmentHeader();this.setDocAssignmentObjHeader();}else if(e.getParameter("name")==="matDocAssignmentChangeTextDataDetail"){this.vRouter="matDocAssignmentChangeTextDataDetail";var s=fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');var D=fcg.mdg.approvecrv2.util.Formatter.getDocAssignmentDetailHdr("Text");var c=this.getView().byId("DocAssignmentTextDetailPage").getCustomHeader();c.destroyContentMiddle();c.addContentMiddle(new sap.m.Text({text:D}));this.loadDocAssignmentTextLayout();fcg.mdg.approvecrv2.util.Formatter.resetFormBolding(this.getView());this.sRowId=e.getParameter('arguments').RowId;this.bindTextData();this.setDocAssignmentObjHeader();if(sap.ui.getCore().byId("MatDocAssignmentTxtBtnPrev")!==undefined&&sap.ui.getCore().byId("MatDocAssignmentTxtBtnNext")!==undefined){sap.ui.getCore().byId("MatDocAssignmentTxtBtnPrev").setVisible(false);sap.ui.getCore().byId("MatDocAssignmentTxtBtnNext").setVisible(false);}}},this);},loadDocAssignmentTextLayout:function(){if(this.oDocAssignmentDetails===""){this.oDocAssignmentDetails=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialDocAssigmentTextDetails',fcg.mdg.approvecrv2.util.Formatter);}else{this.getView().byId("DocAssignmentTextDetailPage").removeContent(this.oDocAssignmentDetails);if(this.oDocAssignmentDetails!==undefined){this.oDocAssignmentDetails.destroy();}this.oDocAssignmentDetails=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Material.MaterialDocAssigmentTextDetails',fcg.mdg.approvecrv2.util.Formatter);}this.getView().byId("DocAssignmentTextDetailPage").removeContent(this.oDocAssignmentDetails);this.getView().byId("DocAssignmentTextDetailPage").addContent(this.oDocAssignmentDetails);},setDocAssignmentObjHeader:function(){var h;var d;var D=fcg.mdg.approvecrv2.util.DataAccess.getObjectKey();var m=this.i18n.getText("MATERIAL");D=m+": "+D;var l=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(this.oDocAssignmentTextDetails.results[this.sRowId].LANGUCODE,this.oDocAssignmentTextDetails.results[this.sRowId].LANGUCODE__TXT);var a=this.i18n.getText("Language");h=a+": "+l;d=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(this.oDocAssignmentTextDetails.results[this.sRowId].DOKAR,this.oDocAssignmentTextDetails.results[this.sRowId].DOKAR__TXT);d=this.i18n.getText("Mat_Document")+": "+d+"/"+this.oDocAssignmentTextDetails.results[this.sRowId].DOKNR+"/"+this.oDocAssignmentTextDetails.results[this.sRowId].DOKVR+"/"+this.oDocAssignmentTextDetails.results[this.sRowId].DOKTL;this.getView().byId("DocAssignmentTextDetailHeader").setTitle(h);this.getView().byId("DocumentNameHeader").setText(d);this.getView().byId("DocAssignmentHeader").setText(D);},setDocAssignmentHeader:function(){var T=this.oDocAssignmentTextDetails.results.length;var t=this.sRowId;t++;var c=this.getView().byId("DocAssignmentTextDetailPage").getCustomHeader();c.destroyContentMiddle();var D=fcg.mdg.approvecrv2.util.Formatter.getDocAssignmentDetailHdr("Text",t,T);c.addContentMiddle(new sap.m.Text({text:D}));var v=this;if(sap.ui.getCore().byId("MatDocAssignmentTxtBtnPrev")===undefined&&sap.ui.getCore().byId("MatDocAssignmentTxtBtnNext")===undefined){c.addContentRight(new sap.m.Button({id:"MatDocAssignmentTxtBtnPrev",icon:"sap-icon://up",press:function(){v.loadDocAssignmentTextLayout();v.sRowId--;v.bindTextData();v.setDocAssignmentHeader();v.setDocAssignmentObjHeader();}}));c.addContentRight(new sap.m.Button({id:"MatDocAssignmentTxtBtnNext",icon:"sap-icon://down",press:function(){v.loadDocAssignmentTextLayout();v.sRowId++;v.bindTextData();v.setDocAssignmentHeader();v.setDocAssignmentObjHeader();}}));}sap.ui.getCore().byId("MatDocAssignmentTxtBtnPrev").setVisible(true);sap.ui.getCore().byId("MatDocAssignmentTxtBtnNext").setVisible(true);fcg.mdg.approvecrv2.DomainSpecParts.Material.Material.setMatIteratorVisibility(t,sap.ui.getCore().byId("MatDocAssignmentTxtBtnPrev"),sap.ui.getCore().byId("MatDocAssignmentTxtBtnNext"),T);},bindTextData:function(){if(this.vRouter==="matDocAssignmentChangeTextDataDetail"){this.oDocAssignmentTextDetails=fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialDocAssignmentChange.getTextDetailData();var n=this.oDocAssignmentTextDetails.results[this.sRowId].NewValue;var t=this.oDocAssignmentTextDetails.results[this.sRowId].TXTDRAD;sap.ui.getCore().byId("Txt_TXTDRAD").setText(t);if(n!=="Added"&&n!=="Deleted"){sap.ui.getCore().byId("Txt_TXTDRAD").addStyleClass("text_bold");}}else if(this.vRouter==="matDocAssignmentTextDataDetail"){this.oDocAssignmentTextDetails=fcg.mdg.approvecrv2.DomainSpecParts.Material.MaterialDocAssignmentCreate.getTextData();var t=this.oDocAssignmentTextDetails.results[this.sRowId].TXTDRAD;sap.ui.getCore().byId("Txt_TXTDRAD").setText(t);}}});
