/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("sap.ca.ui.message.message");jQuery.sap.require("sap.ca.ui.model.type.DateTime");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Supplier");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange");sap.ca.scfld.md.controller.BaseDetailController.extend("fcg.mdg.approvecrv2.view.SubRangeDetail",{oItemTemp:"",subheader:"",extHookdisplayWithhldTaxData:null,extHookModifyStyleClass:null,onInit:function(){this.getView().byId("SuppSubRangePage").setShowNavButton(true);this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="SubRange"){var s=fcg.mdg.approvecrv2.DomainSpecParts.Supplier.getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');fcg.mdg.approvecrv2.util.Formatter.resetFormBolding(this.getView());var a=e.getParameter("arguments");this.Subrange=a.Key;var r=fcg.mdg.approvecrv2.DomainSpecParts.Supplier.getNavData();this.displaySubRangeData(r);this.hideSubRangeSection();this.getView().rerender();}},this);},onAfterRendering:function(){this.hideSubRangeSection();},displaySubRangeData:function(r){var s="";for(var i=0;i<r.results.length;i++){if(r.results.length>1){var a="";if(r.results[i]!==undefined&&r.results[i].SP_AssignedSupplierRel.KTOKK!==undefined&&r.results[i].SP_AssignedSupplierRel.KTOKK__TXT!==undefined){var b=r.results[i].SP_AssignedSupplierRel;a=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(b.KTOKK,b.KTOKK__TXT);}this.subheader=fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.getSubheaderWithAccGrp(r.results[i].STANDARD,r.results[i].OBJECT_ID,r.results[i].REASON_ID__TXT,a);}else{this.subheader="";}for(var j=0;j<r.results[i].SP_AssignedPurchasingOrgsRel.results.length;j++){var A=r.results[i].SP_AssignedPurchasingOrgsRel.results[j];for(var k=0;k<A.SP_PurchOrgPurchasingOrg2Rel.results.length;k++){var c=A.SP_PurchOrgPurchasingOrg2Rel.results[k];var d=c.LTSNR;var p=c.EKORG;var e=c.WERKS;var f=c.ASSIGNMENT_ID+p+d+e;if(f===this.Subrange){var P=A.EKORG__TXT;var g="";if(d!=="|#-#|"&&d!=="|#|"){g=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(c.LTSNR,c.LTSNR__TXT);}var h="";if(c.WERKS!=="|#-#|"&&c.WERKS!=="|#|"){h=fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(c.WERKS,c.WERKS__TXT);}var o="";P=this.getView().getModel("i18n").getProperty("SP_purchorg")+": "+P+" ("+p+")";if(g.trim().length>0){o=this.getView().getModel("i18n").getProperty("SubRange")+": ";o=o+g;}if(h.trim().length>0){o=o+" "+this.getView().getModel("i18n").getProperty("plant")+': ';o=o+h;}this.getView().byId("SuppSubrangeObjHeaderDet").setTitle(o);var m=fcg.mdg.approvecrv2.util.DataAccess.getObjectKey();this.getView().byId("SuppSubrangebpdesc").setText(m);this.getView().byId("erpVendSubrange").setText(this.subheader);this.getView().byId("purchOrgDesc").setText(P);var F=c;var M=new sap.ui.model.json.JSONModel();M.setData(F);var E=this.getView().byId("SimpleSuppFormSubrange");E.setModel(M);s="text_bold";if(c.ChangeData.results!==undefined&&c.ChangeData.results.length>0){s="text_bold";for(var l=0;l<c.ChangeData.results.length;l++){var L="lblSub"+c.ChangeData.results[l].Attribute;var n=this.getView().byId(L);if(n!==undefined){n.setDesign("Bold");}var t="sub"+c.ChangeData.results[l].Attribute;if(this.getView().byId(t)!==undefined)this.getView().byId(t).addStyleClass(s);}}}}}}},hideSubRangeSection:function(){var p;if(this.getView().byId("subWAERS").getText()===""&&this.getView().byId("subMINBW").getText()==="0.00"&&this.getView().byId("subBOPNR").getText()===""&&this.getView().byId("subZTERM").getText()===""&&this.getView().byId("subINCO1").getText()===""&&this.getView().byId("subMEPRF").getText()===""&&this.getView().byId("subINCO2").getText()===""&&this.getView().byId("suppconditions")!==undefined){var s=this.getView().byId('suppconditions').getId();p=$('#'+s).closest("div").attr("id");$('#'+p).remove();}if(this.getView().byId("subEKGRP").getText()===""&&this.getView().byId("subBSTAE").getText()===""&&this.getView().byId("subMEGRU").getText()===""&&this.getView().byId("subRDPRF").getText()===""&&this.getView().byId("subPLIFZ").getText()==="0"&&this.getView().byId("subDISPO").getText()===""&&this.getView().byId("subMRPPP").getText()===""&&this.getView().byId("subLFRHY").getText()===""&&this.getView().byId("SP_DefaultMat")!==undefined){var d=this.getView().byId('SP_DefaultMat').getId();p=$('#'+d).closest("div").attr("id");$('#'+p).remove();}if(this.getView().byId("subLIPRE").getText()===""&&this.getView().byId("subLIBES").getText()===""&&this.getView().byId("subLISER").getText()===""&&this.getView().byId("SP_ServiceData")!==undefined){var a=this.getView().byId('SP_ServiceData').getId();p=$('#'+a).closest("div").attr("id");$('#'+p).remove();}if(this.getView().byId("subVERKF").getText()===""&&this.getView().byId("suppsalesdata")!==undefined){var b=this.getView().byId('suppsalesdata').getId();p=$('#'+b).closest("div").attr("id");$('#'+p).remove();}if(this.getView().byId("subLFABC").getText()===""&&this.getView().byId("subEXPVZ").getText()===""&&this.getView().byId("subZOLLA").getText()===""&&this.getView().byId("subPAPRF").getText()===""&&this.getView().byId("subXNBWY").getText()===""&&this.getView().byId("subLEBRE").getText()===""&&this.getView().byId("subWEBRE").getText()===""&&this.getView().byId("subXERSY").getText()===""&&this.getView().byId("subXERSR").getText()===""&&this.getView().byId("subKZABS").getText()===""&&this.getView().byId("subKZAUT").getText()===""&&this.getView().byId("suppControlData")!==undefined){var c=this.getView().byId('suppControlData').getId();p=$('#'+c).closest("div").attr("id");$('#'+p).remove();}}});
