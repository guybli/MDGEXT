/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccount");sap.ca.scfld.md.controller.BaseDetailController.extend("fcg.mdg.approvecrv2.view.GLDetail",{aDetailData:"",commHeaderIndex:"",oAddTitle:"",oGLAccountDetails:"",extHookModifyDetailFormData:null,extHookDetailDescTemplate:null,extHookHideDetailAddressSection:null,extHookHideDetailCommSection:null,extHookModifyStyleClass:null,extHookDetDescriptionTable:null,extHookglHookgetDescTemplate:null,i18n:sap.ca.scfld.md.app.Application.getImpl().getResourceBundle(),onInit:function(){this.getView().byId("GLDetail").setShowNavButton(true);this.oDataManager=sap.ca.scfld.md.app.Application.getImpl().getComponent().getDataManager();this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="glItemDetail"){var r=fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.oGLAData;var s=fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');this.displayChangedGenData(r);fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.setBoldGenData(r);}},this);},displayChangedGenData:function(r){var s=fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.getS3Instance();if(s.oGlAccountGenForm===""){s.oGlAccountGenForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.GLAccountCreate',fcg.mdg.approvecrv2.util.Formatter);}else{this.getView().byId("GLDetail").removeContent(s.oGlAccountGenForm);if(s.oGlAccountGenForm!==undefined){s.oGlAccountGenForm.destroy();}s.oGlAccountGenForm=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.GLAccountCreate',fcg.mdg.approvecrv2.util.Formatter);}this.getView().byId("GLDetail").addContent(s.oGlAccountGenForm);var c=new sap.ui.model.json.JSONModel();c.setData(r);sap.ui.getCore().byId("glCreateMainDataForm").setModel(c);if(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results.length>0){var t=sap.ui.getCore().byId("glDescTab");this.setStyleForChangedTable(r,t);}else{sap.ui.getCore().byId('glDescTab').destroy();}if(r.ACCOUNT.ACCOUNT2AtthACCOUNTRel.results.length>0){fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.getGenAttachmentList(r);}else{sap.ui.getCore().byId('glAttachFileList').destroy();}fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.hideSection();this.setHeader();},setStyleForChangedTable:function(r,t){if(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel.results.length>0){var m=new sap.ui.model.json.JSONModel();m.setData(r.ACCOUNT.ACCOUNT2DTxtACCOUNTRel);t.setVisible(true);t.setModel(m);var i=this.getDescTemplate(m);t.bindItems("/results",i);}},getDescTemplate:function(m){var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"LANGU__TXT",formatter:function(){var d=m.getProperty("LANGU__TXT",this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"LANGU");return fcg.mdg.approvecrv2.util.Formatter.noValue(d);}}}),new sap.m.Text({text:{path:"TXTSH",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"TXTSH");return fcg.mdg.approvecrv2.util.Formatter.noValue(m.getProperty('TXTSH',this.getBindingContext()));}}}),new sap.m.Text({text:{path:"TXTLG",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"TXTLG");return fcg.mdg.approvecrv2.util.Formatter.noValue(m.getProperty('TXTLG',this.getBindingContext()));}}})]});if(this.extHookglHookgetDescTemplate){var e=this.extHookglHookgetDescTemplate(i);i=e;}return i;},setHeader:function(){var g=fcg.mdg.approvecrv2.util.DataAccess.getObjectKey();this.getView().byId("glObjHeaderDetS3").setTitle(g);var e=fcg.mdg.approvecrv2.DomainSpecParts.GLAccount.oGLAData.Edition;var a=fcg.mdg.approvecrv2.util.Formatter.validityFormatter(e.UsmdVdateFrom,e.UsmdVdateTo);this.getView().byId("glValDetS3").setText(a);}});
