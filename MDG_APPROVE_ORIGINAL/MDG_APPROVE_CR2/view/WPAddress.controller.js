/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Customer");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");jQuery.sap.require("sap.fcg.mdg.lib.address.util.AddressLib");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.Supplier");sap.ca.scfld.md.controller.BaseDetailController.extend("fcg.mdg.approvecrv2.view.WPAddress",{extHookModifyWPAddressDetailFormData:null,extHookModifyWPAddressStyleClass:null,vsimpleform:"",vDomain:"",onInit:function(){this.getView().byId("WPAddressPage").setShowNavButton(true);this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="WPAddressDetail"){this.vDomain=e.getParameter('arguments').Domain;var s=fcg.mdg.approvecrv2.DomainSpecParts[this.vDomain].getS3Instance();var d=s.getDecisions();s.createDecisionButtons(d,this,'navFromDetail');fcg.mdg.approvecrv2.util.Formatter.resetFormBolding(this.getView());var a=e.getParameter("arguments");var r=fcg.mdg.approvecrv2.DomainSpecParts[this.vDomain].oRelData.BP_Root.BP_RelationsRel;this.displayWPAddressData(r,a);this.getView().rerender();}},this);},PressBack:function(){var e=this.getView().byId("SimpleFormWPAddress");e.destroyContent();},onAfterRendering:function(){this.hideSection();},displayWPAddressData:function(r,a){var A=a.Address_number;var c=a.Category;var p=a.Partner1;var P=isNaN(parseInt(a.Partner2))?a.Partner2:parseInt(a.Partner2);for(var i=0;i<r.results.length;i++){if(r.results[i].BP_RelationContactPersonRel!==null){for(var j=0;j<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results.length;j++){var b=r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j];var v=b.ADDRESS_NUMBER;var d=b.PARTNER1;var e=isNaN(parseInt(b.PARTNER2))?b.PARTNER2:parseInt(b.PARTNER2);var C=b.RELATIONSHIPCATEGORY;if(d===p&&e===P&&C===c&&v===A){var R="";var m="";var t="";var s="";var k="";var I="";R=r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j];if(this.extHookModifyWPAddressDetailFormData){var f=this.extHookModifyWPAddressDetailFormData(R);if(f!==undefined){R=f;}}m=new sap.ui.model.json.JSONModel();m.setData(R);var E=this.getView().byId("SimpleFormWPAddress");E.setModel(m);if(R.ChangeData.results!==undefined){if(R.ChangeData.results.length>0){var S="text_bold";if(this.extHookModifyWPAddressStyleClass){var n=this.extHookModifyWPAddressStyleClass(S);if(n!==undefined){S=n;}}for(var l=0;l<R.ChangeData.results.length;l++){var L="lbl"+R.ChangeData.results[l].Attribute;var o=this.getView().byId(L);if(o!==undefined){o.setDesign("Bold");}var T=R.ChangeData.results[l].Attribute;if(this.getView().byId(T)!==undefined){this.getView().byId(T).addStyleClass(S);}}}}var g=R.PARTNER2.replace(/^0+/,"");var h=this.getView().getModel("i18n").getProperty("WorkPlaceAddress")+":"+R.ADDRESS_NUMBER__TXT;var q=this.getView().getModel("i18n").getProperty("ContactPersonText")+":"+r.results[i].PARTNER2__TXT+","+this.getView().getModel("i18n").getProperty("RelDetails")+":"+R.RELATIONSHIPCATEGORY__TXT+"("+R.RELATIONSHIPCATEGORY+")";this.getView().byId("wpAttrHeader").setText(q);var H=this.getView().byId("wpDetailHeader");H.setTitle(h);var u=fcg.mdg.approvecrv2.util.DataAccess.getObjectKey();this.getView().byId("wpAttrHeaderParent").setText(u);if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommEMailsRel.results!==undefined&&r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommEMailsRel.results.length!==0){s={results:[]};for(k=0;k<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommEMailsRel.results.length;k++){s.results.push(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommEMailsRel.results[k]);}if(s.results.length!==0){m=new sap.ui.model.json.JSONModel();m.setData(s);t=this.getView().byId("WPEMailAddresses");t.setVisible(true);t.setModel(m);var w=this.getEMailTemplate(m);t.bindItems("/results",w);}else{t=this.getView().byId("WPEMailAddresses");t.setVisible(false);}}else{t=this.getView().byId("WPEMailAddresses");t.setVisible(false);}if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommPhonesRel.results!==undefined&&r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommPhonesRel.results.length!==0){s={results:[]};for(k=0;k<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommPhonesRel.results.length;k++){if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommPhonesRel.results[k].TELEPHONE!=="")s.results.push(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommPhonesRel.results[k]);}if(s.results.length!==0){m=new sap.ui.model.json.JSONModel();m.setData(s);t=this.getView().byId("WPTelephoneNumbers");t.setVisible(true);t.setModel(m);var x=this.getTelTemplate(m);t.bindItems("/results",x);}else{t=this.getView().byId("WPTelephoneNumbers");t.setVisible(false);}}else{t=this.getView().byId("WPTelephoneNumbers");t.setVisible(false);}if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommFaxesRel.results!==undefined&&r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommFaxesRel.results.length!==0){s={results:[]};for(k=0;k<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommFaxesRel.results.length;k++){if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommFaxesRel.results[k].FAX!=="")s.results.push(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommFaxesRel.results[k]);}if(s.results.length!==0){m=new sap.ui.model.json.JSONModel();m.setData(s);t=this.getView().byId("WPFaxNumbers");t.setVisible(true);t.setModel(m);var y=this.getFaxTemplate(m);t.bindItems("/results",y);}else{t=this.getView().byId("WPFaxNumbers");t.setVisible(false);}}else{t=this.getView().byId("WPFaxNumbers");t.setVisible(false);}if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommMobilesRel.results!==undefined&&r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommMobilesRel.results.length!==0){s={results:[]};for(k=0;k<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommMobilesRel.results.length;k++){if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommMobilesRel.results[k].TELEPHONE!=="")s.results.push(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommMobilesRel.results[k]);}if(s.results.length!==0){m=new sap.ui.model.json.JSONModel();m.setData(s);t=this.getView().byId("WPMobileNumbers");t.setVisible(true);t.setModel(m);I=this.getMobileTemplate(m);t.bindItems("/results",I);}else{t=this.getView().byId("WPMobileNumbers");t.setVisible(false);}}else{t=this.getView().byId("WPMobileNumbers");t.setVisible(false);}if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommURIsRel.results!==undefined&&r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommURIsRel.results.length!==0){s={results:[]};for(k=0;k<r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommURIsRel.results.length;k++){if(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommURIsRel.results[k].URI!=="")s.results.push(r.results[i].BP_RelationContactPersonRel.BP_ContactPersonWorkplacesRel.results[j].BP_WorkplaceCommURIsRel.results[k]);}m=new sap.ui.model.json.JSONModel();m.setData(s);t=this.getView().byId("WPURL");t.setVisible(true);t.setModel(m);I=this.getURLTemplate(m);t.bindItems("/results",I);}else{t=this.getView().byId("WPURL");t.setVisible(false);}}}}}},getTelTemplate:function(m){var t=this;var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"COUNTRY__TXT",formatter:function(){var d=m.getProperty("COUNTRY__TXT",this.getBindingContext());var k=m.getProperty("COUNTRY",this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"COUNTRY");return fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(k,d);}}}),new sap.m.Text({text:{path:"TELEPHONE",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"TELEPHONE");return m.getProperty('TELEPHONE',this.getBindingContext());}}}),new sap.m.Text({text:{path:"EXTENSION",formatter:function(){var e=m.getProperty('EXTENSION',this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"EXTENSION");if(t.isNull(e))return fcg.mdg.approvecrv2.util.Formatter.noValue("");return e;}}}),new sap.m.Text({text:{path:"STD_NO",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"STD_NO");var s=m.getProperty("STD_NO",this.getBindingContext());if(s==="X")s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_YES');else s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_NO');return s;}}})]});return i;},getFaxTemplate:function(m){var t=this;var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"COUNTRY__TXT",formatter:function(){var d=m.getProperty("COUNTRY__TXT",this.getBindingContext());var k=m.getProperty("COUNTRY",this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"COUNTRY");return fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(k,d);}}}),new sap.m.Text({text:{path:"FAX",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"FAX");return m.getProperty('FAX',this.getBindingContext());}}}),new sap.m.Text({text:{path:"EXTENSION",formatter:function(){var e=m.getProperty('EXTENSION',this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"EXTENSION");if(t.isNull(e))return fcg.mdg.approvecrv2.util.Formatter.noValue("");return e;}}}),new sap.m.Text({text:{path:"STD_NO",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"STD_NO");var s=m.getProperty("STD_NO",this.getBindingContext());if(s==="X")s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_YES');else s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_NO');return s;}}})]});return i;},getMobileTemplate:function(m){var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"COUNTRY__TXT",formatter:function(){var d=m.getProperty("COUNTRY__TXT",this.getBindingContext());var k=m.getProperty("COUNTRY",this.getBindingContext());fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"COUNTRY");return fcg.mdg.approvecrv2.util.Formatter.getKeyDesc(k,d);}}}),new sap.m.Text({text:{path:"TELEPHONE",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"TELEPHONE");return m.getProperty('TELEPHONE',this.getBindingContext());}}}),new sap.m.Text({text:{path:"STD_NO",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"STD_NO");var s=m.getProperty("STD_NO",this.getBindingContext());if(s==="X")s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_YES');else s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_NO');return s;}}})]});return i;},getEMailTemplate:function(m){var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"E_MAIL",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"E_MAIL");return m.getProperty('E_MAIL',this.getBindingContext());}}}),new sap.m.Text({text:{path:"STD_NO",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"STD_NO");var s=m.getProperty("STD_NO",this.getBindingContext());if(s==="X")s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_YES');else s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_NO');return s;}}})]});return i;},getURLTemplate:function(m){var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:"URI",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"URI");return m.getProperty('URI',this.getBindingContext());}}}),new sap.m.Text({text:{path:"STD_NO",formatter:function(){fcg.mdg.approvecrv2.util.Formatter.handleCellBolding(this,m,"STD_NO");var s=m.getProperty("STD_NO",this.getBindingContext());if(s==="X")s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_YES');else s=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText('PC_NO');return s;}}})]});return i;},checkBox:function(v){var n="";if(v==="X")n=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("CC_CHECK_BOX_SET");else n=sap.ca.scfld.md.app.Application.getImpl().getResourceBundle().getText("CC_CHECK_BOX_RESET");return n;},hideSection:function(){if(this.getView().byId("FUNCTION").getText()===""&&this.getView().byId("DEPARTMENT").getText()===""&&this.getView().byId("ROOM_NO").getText()===""&&this.getView().byId("FLOOR").getText()===""&&this.getView().byId("BUILDING_P").getText()===""){var w=this.getView().byId('wppersondetails').getId();$('#'+w).hide();}if(this.getView().byId("COMM_TYPE").getText()===""&&this.getView().byId("wppercomm")!==undefined){var a=this.getView().byId('wppercomm').getId();$('#'+a).hide();}if(this.getView().byId("FUNCTION").getText()===""&&this.getView().byId("DEPARTMENT").getText()===""&&this.getView().byId("ROOM_NO").getText()===""&&this.getView().byId("FLOOR").getText()===""&&this.getView().byId("BUILDING_P").getText()===""&&this.getView().byId("COMM_TYPE").getText()===""&&this.getView().byId("SimpleFormWPAddress")!==undefined){var S=this.getView().byId('SimpleFormWPAddress').getId();$('#'+S).hide();}},isNull:function(v){return typeof v==="undefined"||v==='unknown'||v===null||v==='null'||v===''||parseInt(v)===0;}});
