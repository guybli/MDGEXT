/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.Supplier");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.SupplierCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.BPCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.BPChange");fcg.mdg.approvecrv2.DomainSpecParts.Supplier={oCommunicationTable:"",oFormCommunication:"",oBankTable:"",oFormBank:"",oCompcodeTable:"",oFormCompcode:"",oSalesTable:"",oFormSales:"",oSupplierDomain:"",caIconTab:"",vModel:"",oModel:"",oPath:"",oEntity:"",vCrequest:"",oCreate:"",aBatchOperation:[],oBatchModel:"",sContextPath:"",oFormTax:"",oFormIndustry:"",oFormIdentification:"",oFormAddress:"",sModel:"",oSupplierModel:"",_dataOnNav:"",oRelData:"",oObsoleteData:"",oGeneralData:"",oCompanyCodeData:"",oSalesData:"",queryString:"",oSuppCompanyCodeData:"",oObsoleteDataGen:"",oObsoleteDataCC:"",oObsoleteDataPurch:"",opurchaseData:"",oS3Controller:"",oOtc:"",LoadLayout:function(p,m,a,o,s){this.oOtc=o;this.oSupplierModel=s.getView().getModel("MDG_SUPPLIER");this.oS3Controller=s;if(s.oSupplierDomain==="")s.oSupplierDomain=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.Supplier',s);var c=sap.ui.getCore().byId("SupplierTabBar");var g=sap.ui.getCore().byId("SGeneralDataSection");c.setSelectedItem(g);s.getView().byId("page").removeContent(s.oMaterialIconTab);s.getView().byId("page").removeContent(s.accountIconTab);s.getView().byId("page").removeContent(s.glAccountIconTab);s.getView().byId("page").removeContent(s.costCenterIconTab);s.getView().byId("page").removeContent(s.profitCenterIconTab);s.getView().byId("page").removeContent(s.oCustomerDomain);try{sap.ui.getCore().byId("Sfileupload-1-uploader").destroy();}catch(e){}s.getView().byId("page").addContent(s.oSupplierDomain);this.removeCustLayouts();this.queryString="/"+this.oSupplierModel.sServiceUrl+"/";var b=s.supplierHookCustomService(s,this.queryString);if(b!==undefined){this.queryString=b;}},removeCustLayouts:function(s){try{sap.ui.getCore().byId("SGeneral").removeAllContent();sap.ui.getCore().byId("SRoles").removeAllContent();sap.ui.getCore().byId("SBank").removeAllContent();sap.ui.getCore().byId("STax").removeAllContent();sap.ui.getCore().byId("SIdentification").removeAllContent();sap.ui.getCore().byId("SIndustries").removeAllContent();sap.ui.getCore().byId("SErpSupplier").removeAllContent();sap.ui.getCore().byId("SAddress").removeAllContent();sap.ui.getCore().byId("SAddressUsages").removeAllContent();sap.ui.getCore().byId("SGeneral").setVisible(false);sap.ui.getCore().byId("SRoles").setVisible(false);sap.ui.getCore().byId("SBank").setVisible(false);sap.ui.getCore().byId("STax").setVisible(false);sap.ui.getCore().byId("SIdentification").setVisible(false);sap.ui.getCore().byId("SIndustries").setVisible(false);sap.ui.getCore().byId("SErpSupplier").setVisible(false);sap.ui.getCore().byId("SAddress").setVisible(false);sap.ui.getCore().byId("SAddressUsages").setVisible(false);s.supplierHookremovelayout();}catch(e){}},getGeneralData:function(p,a,o,s){this.oOtc=o;var c="";var b;var r="";var C=p.split("(");var d=C[1].split(")");this.vCrequest=d[0];var u="Decisions?Crequest="+d[0];var D=this.queryString+u;if(!s.oApplicationFacade.isMock()){p=this.queryString+p+'/?$expand=';}else{p=p+'/?$expand=';}var i=sap.ui.getCore().byId("SNotes");var I=sap.ui.getCore().byId("SAttachmentSupplier");s.setNoteAttachIconTab(i,I);if(a==='CHANGE'){c=fcg.mdg.approvecrv2.DomainSpecParts.BPChange.getGeneralData(this.oSupplierModel,p,D,s,this.oOtc);if(s.oApplicationFacade.isMock()){c=this.getMockQuery(p,a);}b=[];fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oSupplierModel,c,b);if(!s.oApplicationFacade.isMock()){fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oSupplierModel,D,b);}fcg.mdg.approvecrv2.util.DataAccess.performSubmitBatch(this.oSupplierModel,s);r=fcg.mdg.approvecrv2.util.DataAccess.getBatchData();this.oGeneralData=r;if(!s.oApplicationFacade.isMock()){if(r[1].headers!==undefined&&r[1].headers.usmd1a016!==undefined){s.setCrLockError(r[1].headers.usmd1a016);s.createDecisionButtons(r[1].data.results,s,"",true);}else{if(!s.oApplicationFacade.isMock()){if(r[1].data!==undefined)s.createDecisionButtons(r[1].data.results,s);else s.createDecisionButtons([],s);}}if(r[1].headers!==undefined&&r[1].headers.mdg_gw_approve_cr009!==undefined){s.setCrRejected(r[1].headers.mdg_gw_approve_cr009);}}fcg.mdg.approvecrv2.DomainSpecParts.BPChange.displayGeneralData(r[0].data,s,this.oOtc);s.supplierHookModifySuppChangeGen(s,r);}else if(a==='CREATE'){c=fcg.mdg.approvecrv2.DomainSpecParts.BPCreate.getGeneralData(this.oSupplierModel,p,D,s,this.oOtc);if(s.oApplicationFacade.isMock()){c=this.getMockQuery(p,a);}b=[];fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oSupplierModel,c,b);if(!s.oApplicationFacade.isMock()){fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oSupplierModel,D,b);}fcg.mdg.approvecrv2.util.DataAccess.performSubmitBatch(this.oSupplierModel,s);r=fcg.mdg.approvecrv2.util.DataAccess.getBatchData();if(!s.oApplicationFacade.isMock()){if(r[1].headers!==undefined&&r[1].headers.usmd1a016!==undefined){s.setCrLockError(r[1].headers.usmd1a016);s.createDecisionButtons(r[1].data.results,s,"",true);}else{if(!s.oApplicationFacade.isMock()){if(r[1].data!==undefined)s.createDecisionButtons(r[1].data.results,s);else s.createDecisionButtons([],s);}}if(r[1].headers!==undefined&&r[1].headers.mdg_gw_approve_cr009!==undefined){s.setCrRejected(r[1].headers.mdg_gw_approve_cr009);}}fcg.mdg.approvecrv2.DomainSpecParts.BPCreate.displayGeneralData(r[0].data,s,this.oOtc);s.suppliertHookModifySuppCreateGen(s,r);}this.oGeneralData=r;},getRelationshipData:function(p,a,o,s){var g;var c="";p=p+'/?$expand=';if(this.oRelData===""){if(a==='CHANGE'){c=fcg.mdg.approvecrv2.DomainSpecParts.BPChange.getRelationshipData(this.oSupplierModel,p,s,this.oOtc);g=this;this.oSupplierModel.read(c,null,null,true,function(r){fcg.mdg.approvecrv2.DomainSpecParts.BPChange.displayRelationshipData(r,s,o,"suppRelPanel");g.oRelData=r;});}else if(a==='CREATE'){c=fcg.mdg.approvecrv2.DomainSpecParts.BPCreate.getRelationshipData(this.oSupplierModel,p,s,this.oOtc);g=this;this.oSupplierModel.read(c,null,null,true,function(r){fcg.mdg.approvecrv2.DomainSpecParts.BPCreate.displayRelationship(r,s,o,"suppRelPanel");g.oRelData=r;});}}},getSuppCompanyCodeData:function(p,a,s){var c="";var g;s.oSuppCompCode={aSuppCompCode:[]};p=p+'/?$expand=';if(this.oSuppCompanyCodeData===""){if(a==='CHANGE'){c=fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.getSuppCompanyCodeData(this.oSupplierModel,p,s);g=this;this.oSupplierModel.read(c,null,null,true,function(r){if(r.ChangeRequestID===s.vCrId){fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.displaySuppCompanyCodeData(r,s);g.oSuppCompanyCodeData=r;s.supplierHookModifySuppChangeComp(s,g.oSuppCompanyCodeData);}});}else if(a==='CREATE'){c=fcg.mdg.approvecrv2.DomainSpecParts.SupplierCreate.getSuppCompanyCodeData(this.oSupplierModel,p,s);g=this;this.oSupplierModel.read(c,null,null,true,function(r){if(r.ChangeRequestID===s.vCrId){fcg.mdg.approvecrv2.DomainSpecParts.SupplierCreate.displaySuppCompanyCodeData(r,s);g.oSuppCompanyCodeData=r;s.supplierHookModifySuppCreateComp(s,g.oSuppCompanyCodeData);}});}}},getPurchaseData:function(p,a,s){var c="";var g;s.oPurchaseArea={aPurchaseArea:[]};p=p+'/?$expand=';if(this.opurchaseData===""){if(a==='CHANGE'){c=fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.getPurchaseData(this.oSupplierModel,p,s);g=this;this.oSupplierModel.read(c,null,null,true,function(r){if(r.ChangeRequestID===s.vCrId){fcg.mdg.approvecrv2.DomainSpecParts.SupplierChange.displayPurchaseData(r,s);g.opurchaseData=r;s.supplierHookModifySuppChangePurchOrg(s,g.opurchaseData);}});}else if(a==='CREATE'){c=fcg.mdg.approvecrv2.DomainSpecParts.SupplierCreate.getPurchaseData(this.oSupplierModel,p,s);g=this;this.oSupplierModel.read(c,null,null,true,function(r){if(r.ChangeRequestID===s.vCrId){fcg.mdg.approvecrv2.DomainSpecParts.SupplierCreate.displayPurchaseData(r,s);g.opurchaseData=r;s.supplierHookModifySuppCreatePurchOrg(s,g.opurchaseData);}});}}},setNavData:function(d){this._dataOnNav=d;},getNavData:function(){return this._dataOnNav;},setRouter:function(R){this.oRouter=R;},getRouter:function(){return this.oRouter;},setContextPath:function(c){this.contextPath=c;},getContextPath:function(){return this.contextPath;},setChangeRequest:function(c){this.changeRequest=c;},getchangeRequest:function(){return this.changeRequest;},hideSuppCompcodeSection:function(){if(sap.ui.getCore().byId("SuppcompcodeBUKRS").getText()===""&&sap.ui.getCore().byId("SuppCompCode")!==undefined){sap.ui.getCore().byId("SuppCompCode").destroy();}if(sap.ui.getCore().byId("SuppAKONT").getText()===""&&sap.ui.getCore().byId("SuppLNRZE").getText()===""&&sap.ui.getCore().byId("SuppBEGRU").getText()===""&&sap.ui.getCore().byId("SuppMINDK").getText()===""&&sap.ui.getCore().byId("SuppZUAWA").getText()===""&&sap.ui.getCore().byId("SuppFDGRV").getText()===""&&sap.ui.getCore().byId("SuppFRGRP").getText()===""&&sap.ui.getCore().byId("SuppFDGRV").getText()===""&&sap.ui.getCore().byId("SuppCERDT").getText()===""&&sap.ui.getCore().byId("SuppAccontingInfo")!==undefined){sap.ui.getCore().byId("SuppAccontingInfo").destroy();}if(sap.ui.getCore().byId("SuppQSSKZ").getText()===""&&sap.ui.getCore().byId("SuppQLAND").getText()===""&&sap.ui.getCore().byId("SuppQSREC").getText()===""&&sap.ui.getCore().byId("SuppQSZNR").getText()===""&&sap.ui.getCore().byId("SuppQSZDT").getText()===""&&sap.ui.getCore().byId("SuppQSBGR").getText()===""&&sap.ui.getCore().byId("SuppWithTax")!==undefined){sap.ui.getCore().byId("SuppWithTax").destroy();}if(sap.ui.getCore().byId("SuppVZSKZ").getText()===""&&(sap.ui.getCore().byId("SuppZINRT").getText()==="00"||sap.ui.getCore().byId("SuppZINRT").getText()==="")&&sap.ui.getCore().byId("SuppZINDT").getText()===""&&sap.ui.getCore().byId("SuppDATLZ").getText()===""&&sap.ui.getCore().byId("SuppIntrestCalc")!==undefined){sap.ui.getCore().byId("SuppIntrestCalc").destroy();}if(sap.ui.getCore().byId("SuppALTKN").getText()===""&&(sap.ui.getCore().byId("SuppPERNR").getText()===""||sap.ui.getCore().byId("SuppPERNR").getText()==="0")&&sap.ui.getCore().byId("SuppReferenceData")!==undefined){sap.ui.getCore().byId("SuppReferenceData").destroy();}if(sap.ui.getCore().byId("SuppZTERM").getText()===""&&sap.ui.getCore().byId("SuppGUZTE").getText()===""&&sap.ui.getCore().byId("SuppKULTG").getText()==="0"&&sap.ui.getCore().byId("SuppTOGRU").getText()===""&&sap.ui.getCore().byId("SuppREPRF").getText()===""&&sap.ui.getCore().byId("SuppPaymentData")!==undefined){sap.ui.getCore().byId("SuppPaymentData").destroy();}if(sap.ui.getCore().byId("SuppZWELS").getText()===""&&sap.ui.getCore().byId("SuppLNRZB").getText()===""&&sap.ui.getCore().byId("SuppZGRUP").getText()===""&&sap.ui.getCore().byId("SuppWEBTR").getText()===""&&sap.ui.getCore().byId("SuppUZAWE").getText()===""&&sap.ui.getCore().byId("SuppZAHLS").getText()===""&&sap.ui.getCore().byId("SuppHBKID").getText()===""&&sap.ui.getCore().byId("SuppXPORE").getText()===""&&sap.ui.getCore().byId("SuppXEDIP").getText()===""&&sap.ui.getCore().byId("SuppXVERR").getText()===""&&sap.ui.getCore().byId("SuppAautomaticPaymnt")!==undefined){sap.ui.getCore().byId("SuppAautomaticPaymnt").destroy();}if(sap.ui.getCore().byId("SuppTOGRR").getText()===""&&sap.ui.getCore().byId("SuppInvVerification")!==undefined){sap.ui.getCore().byId("SuppInvVerification").destroy();}if(sap.ui.getCore().byId("SuppBUSAB").getText()===""&&sap.ui.getCore().byId("SuppEIKTO").getText()===""&&sap.ui.getCore().byId("SuppZSABE").getText()===""&&sap.ui.getCore().byId("SuppTLFNS").getText()===""&&sap.ui.getCore().byId("SuppINTAD").getText()===""&&sap.ui.getCore().byId("SuppXDEZV").getText()===""&&sap.ui.getCore().byId("SuppXAUSZ").getText()===""&&sap.ui.getCore().byId("SuppKVERM").getText()===""&&sap.ui.getCore().byId("SuppTLFXS").getText()===""&&sap.ui.getCore().byId("SuppCorrespondance")!==undefined){sap.ui.getCore().byId("SuppCorrespondance").destroy();}if(sap.ui.getCore().byId("SuppMGRUP").getText()===""&&sap.ui.getCore().byId("SuppDunningData")!==undefined){sap.ui.getCore().byId("SuppDunningData").destroy();}},hidePurchaseSection:function(){if(sap.ui.getCore().byId("purWAERS").getText()===""&&sap.ui.getCore().byId("purZTERM").getText()===""&&sap.ui.getCore().byId("purMINBW").getText()==="0.00"&&sap.ui.getCore().byId("purKALSK").getText()===""&&sap.ui.getCore().byId("purBOPNR").getText()===""&&sap.ui.getCore().byId("purMEPRF").getText()===""&&sap.ui.getCore().byId("purINCO1").getText()===""&&sap.ui.getCore().byId("SupplierCondition")!==undefined){sap.ui.getCore().byId("SupplierCondition").destroy();}if(sap.ui.getCore().byId("purVERKF").getText()===""&&sap.ui.getCore().byId("purEIKTO").getText()===""&&sap.ui.getCore().byId("salesdata")!==undefined){sap.ui.getCore().byId("salesdata").destroy();}if(sap.ui.getCore().byId("purLIPRE").getText()===""&&sap.ui.getCore().byId("purVENSL").getText()==="0.0"&&sap.ui.getCore().byId("purLISER").getText()===""&&sap.ui.getCore().byId("purLIBES").getText()===""&&sap.ui.getCore().byId("servicedata")!==undefined){sap.ui.getCore().byId("servicedata").destroy();}if(sap.ui.getCore().byId("purEKGRP").getText()===""&&sap.ui.getCore().byId("purBSTAE").getText()===""&&sap.ui.getCore().byId("purRDPRF").getText()===""&&sap.ui.getCore().byId("purPLIFZ").getText()==="0"&&sap.ui.getCore().byId("purMEGRU").getText()===""&&sap.ui.getCore().byId("defaultdatamat")!==undefined){sap.ui.getCore().byId("defaultdatamat").destroy();}if(sap.ui.getCore().byId("purLFABC").getText()===""&&sap.ui.getCore().byId("purEXPVZ").getText()===""&&sap.ui.getCore().byId("purZOLLA").getText()===""&&sap.ui.getCore().byId("purSKRIT").getText()===""&&sap.ui.getCore().byId("purPAPRF").getText()===""&&sap.ui.getCore().byId("purVSBED").getText()===""&&sap.ui.getCore().byId("purXNBWY").getText()===" "&&sap.ui.getCore().byId("purNRGEW").getText()===""&&sap.ui.getCore().byId("purPRFRE").getText()===""&&sap.ui.getCore().byId("purAGREL").getText()===""&&sap.ui.getCore().byId("purWEBRE").getText()===""&&sap.ui.getCore().byId("purXERSR").getText()===""&&sap.ui.getCore().byId("purXERSY").getText()===""&&sap.ui.getCore().byId("purKZABS").getText()===""&&sap.ui.getCore().byId("purKZAUT").getText()===""&&sap.ui.getCore().byId("purBOLRE").getText()===""&&sap.ui.getCore().byId("purBOIND").getText()===""&&sap.ui.getCore().byId("purUMSAE").getText()===""&&sap.ui.getCore().byId("purBLIND").getText()===""&&sap.ui.getCore().byId("purLEBRE").getText()===""&&sap.ui.getCore().byId("controldata")!==undefined){sap.ui.getCore().byId("controldata").destroy();}},getS3Instance:function(){return this.oS3Controller;},getData:function(t){if(t==="General"){return this.oGeneralData;}},getGeneralSectionObsoleteData:function(){var c='ObsoleteDataCollection?$filter='+'((ChangeRequestId+eq+'+this.vCrequest+')'+'and'+'((Entity+eq+'+'\'BP_BKDTL\''+')'+'or'+'(Entity+eq+'+'\'BP_ROLE\''+')'+'or'+'(Entity+eq+'+'\'BP_TAXNUM\''+')'+'or'+'(Entity+eq+'+'\'BP_IDNUM\''+')'+'or'+'(Entity+eq+'+'\'BP_MLT_AS\''+')'+'or'+'(Entity+eq+'+'\'BP_REL\''+')'+'or'+'(Entity+eq+'+'\'BP_CPGEN\''+')'+'or'+'(Entity+eq+'+'\'AD_MOB\''+')'+'or'+'(Entity+eq+'+'\'BP_WPAD\''+')'+'or'+'(Entity+eq+'+'\'WP_URL\''+')'+'or'+'(Entity+eq+'+'\'WP_TEL\''+')'+'or'+'(Entity+eq+'+'\'WP_MOB\''+')'+'or'+'(Entity+eq+'+'\'WP_FAX\''+')'+'or'+'(Entity+eq+'+'\'WP_EMAIL\''+')'+'or'+'(Entity+eq+'+'\'BP_INDSTR\''+')'+'or'+'(Entity+eq+'+'\'ADDRESS\''+')'+'or'+'(Entity+eq+'+'\'AD_EMAIL\''+')'+'or'+'(Entity+eq+'+'\'AD_FAX\''+')'+'or'+'(Entity+eq+'+'\'AD_NAME_P\''+')'+'or'+'(Entity+eq+'+'\'AD_NAME_O\''+')'+'or'+'(Entity+eq+'+'\'AD_TEL\''+')'+'or'+'(Entity+eq+'+'\'AD_URL\''+')'+'or'+'(Entity+eq+'+'\'BP_VENSUB\''+')'+'or'+'(Entity+eq+'+'\'BP_ADDUSG\''+')))';return c;},getCompanyCodeObosleteData:function(){var c='ObsoleteDataCollection?$filter='+'((ChangeRequestId+eq+'+this.vCrequest+')'+'and'+'((Entity+eq+'+'\'BP_COMPNY\''+')'+'or'+'(Entity+eq+'+'\'BP_DUNN\''+')'+'or'+'(Entity+eq+'+'\'BP_WHTAX\''+')))';return c;},getPurchaseOrgObsoleteData:function(){var c='ObsoleteDataCollection?$filter='+'((ChangeRequestId+eq+'+this.vCrequest+')'+'and'+'((Entity+eq+'+'\'BP_PORG\''+')'+'or'+'(Entity+eq+'+'\'BP_PORG2\''+')'+'or'+'(Entity+eq+'+'\'BP_VENFCN\''+')))';return c;},getMockQuery:function(p,A){var m="";if(A==="CHANGE"){m=p+"BP_Root/ChangeData,BP_Root/BP_BankAccountsRel/ChangeData,BP_Root/BP_TaxNumbersRel/ChangeData,"+"BP_Root/BP_IndustryRel/ChangeData,BP_Root/BP_RolesRel/ChangeData,BP_Root/BP_IdentificationNumbersRel/ChangeData,"+"BP_Root/BP_AddressesRel/ChangeData,BP_Root/BP_RelationsRel/ChangeData,BP_Root/BP_RelationsRel/BP_RelationContactPersonRel/ChangeData,BP_Root/BP_AddressUsagesRel/ChangeData,"+"Notes,Attachments";}if(A==="CREATE"){m=p+"BP_Root,BP_Root/BP_PersonRel,BP_Root/BP_PersonRel/CD_CORRESPONDLANGUAGE,BP_Root/BP_BankAccountsRel,"+"BP_Root/BP_TaxNumbersRel,BP_Root/BP_IndustryRel,BP_Root/BP_RolesRel,BP_Root/BP_IdentificationNumbersRel,BP_Root/BP_AddressesRel,BP_Root/BP_RelationsRel,BP_Root/BP_AddressUsagesRel,BP_Root/SP_MultipleAssignmentsRel/SP_AssignedSupplierRel,"+"Notes,Attachments";}return m;},ResetBufferedBatchData:function(){this.oRelData="";this.oSuppCompanyCodeData="";this.opurchaseData="";this.oGeneralData="";this.oObsoleteDataGen="";this.oObsoleteDataPurch="";this.oObsoleteDataCC="";}};
