/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("fcg.mdg.approvecrv2.DomainSpecParts.GLAccount");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate");jQuery.sap.require("fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange");jQuery.sap.require("fcg.mdg.approvecrv2.util.DataAccess");fcg.mdg.approvecrv2.DomainSpecParts.GLAccount={oBatchModel:"",oGLModel:"",sServiceURL:"",oS3Controller:null,oGLAData:"",oGLCCData:"",oVAction:"",oCCData:"",oCEData:"",loadLayout:function(s){s.getView().byId("page").removeContent(s.oCustomerDomain);s.getView().byId("page").removeContent(s.profitCenterIconTab);s.getView().byId("page").removeContent(s.oSupplierDomain);s.getView().byId("page").removeContent(s.costCenterIconTab);s.getView().byId("page").removeContent(s.glAccountIconTab);s.getView().byId("page").removeContent(s.oMaterialIconTab);this.oGLModel=s.getView().getModel("MDG_GL_ACCOUNT");try{sap.ui.getCore().byId("glFileUpload-1-uploader").destroy();}catch(e){}try{sap.ui.getCore().byId("glFileUpload-uploader").destroy();}catch(e){}this.oS3Controller=s;if(s.glAccountIconTab===""){s.glAccountIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.GLAccount',s);}else{s.glAccountIconTab.destroy();try{s.profitCenterIconTab.destroy();}catch(e){}try{s.costCenterIconTab.destroy();}catch(e){}try{s.oMaterialIconTab.destroy();}catch(e){}try{s.oCustomerDomain.destroy();}catch(e){}try{s.oSupplierDomain.destroy();}catch(e){}s.glAccountIconTab=sap.ui.xmlfragment('fcg.mdg.approvecrv2.frag.GLAccount',s);}s.getView().byId("page").addContent(s.glAccountIconTab);this.oBatchModel=s.getView().getModel("MDG_GL_ACCOUNT");this.sServiceURL=this.oBatchModel.sServiceUrl+"/";},getS3Instance:function(){return this.oS3Controller;},displayCCData:function(v,b,p,a,s){var l=this;var g;this.oVAction=a;var q="";if(this.oCCData===""){if(a==='CREATE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.getCCQuery(this.sServiceURL,p,s);g=this;this.oGLModel.read(q,null,null,true,function(r){g.oCCData=r;fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.displayCCData(r,s);s.glHookModifyCompCodeCreateData(s,r);});}else if(a==='CHANGE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.getCCQuery(this.sServiceURL,p,s);g=this;this.oGLModel.read(q,null,null,true,function(r){g.oCCData=r;fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.displayCCChangeData(r,s);s.glHookModifyCompCodeChangeData(s,r);});}}},displayCEData:function(v,b,p,a,s){var l=this;var g;this.oVAction=a;var q="";if(this.oCEData===""){if(a==='CREATE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.getCEQuery(this.sServiceURL,p,s);g=this;this.oGLModel.read(q,null,null,true,function(r){g.oCEData=r;fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.displayCEData(r,s);s.glHookModifyCECreateData(s,r);});}else if(a==='CHANGE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.getCEQuery(this.sServiceURL,p,s);g=this;this.oGLModel.read(q,null,null,true,function(r){g.oCEData=r;fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.displayCEChangeData(r,s);s.glHookModifyCEChangeData(s,r);});}}},displayData:function(v,b,p,a,s){var l=this;this.oVAction=a;var q="";var i=sap.ui.getCore().byId("glAccountNotes");var I=sap.ui.getCore().byId("glAccountAttachments");if(a==='CHANGE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.getGenQuery(this.sServiceURL,p,s);}else if(a==='CREATE'){q=fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.getGenQuery(this.sServiceURL,p,s);}q="/"+q;fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,q,b);var c=p.split("(");var C=c[1].split(")");var u="Decisions?Crequest="+C[0];var d="/"+u;if(!s.oApplicationFacade.isMock()){fcg.mdg.approvecrv2.util.DataAccess.addBatchOperation(this.oBatchModel,d,b);}fcg.mdg.approvecrv2.util.DataAccess.performSubmitBatch(this.oBatchModel,s);var r=fcg.mdg.approvecrv2.util.DataAccess.getBatchData();if(!s.oApplicationFacade.isMock()){if(r[1].headers!==undefined&&r[1].headers.usmd1a016!==undefined){s.setCrLockError(r[1].headers.usmd1a016);s.createDecisionButtons(r[1].data.results,s,"",true);}else{if(r[1].data!==undefined)s.createDecisionButtons(r[1].data.results,s);else s.createDecisionButtons([],s);}}if(r[1].headers!==undefined&&r[1].headers.mdg_gw_approve_cr009!==undefined){s.setCrRejected(r[1].headers.mdg_gw_approve_cr009);}s.setNoteAttachIconTab(i,I);this.oGLAData=r[0].data;if(r[0]!==undefined&&r[0].data!==undefined){if(a==='CREATE'){fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.initialize_Forms(s);fcg.mdg.approvecrv2.DomainSpecParts.GLAccountCreate.displayGenData(r[0].data,s);s.glHookModifyAccCreateData(s,r);}else if(a==='CHANGE'){fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.initialize_Tables(s);fcg.mdg.approvecrv2.DomainSpecParts.GLAccountChange.displayGenChangeData(r[0].data,s);s.glHookModifyAccChangeData(s,r);}}else{sap.ui.getCore().byId("glAccountrGenTab").setVisible(false);}},ResetGLABufferedBatchData:function(){this.oGLAData="";this.oCCData="";this.oCEData="";}};
